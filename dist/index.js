module.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=21)}([function(e,t){e.exports=require("react")},function(e,t){e.exports=require("@babel/runtime/helpers/defineProperty")},function(e,t){e.exports=require("@babel/runtime/helpers/assertThisInitialized")},function(e,t){e.exports=require("@babel/runtime/helpers/getPrototypeOf")},function(e,t){e.exports=require("@babel/runtime/helpers/classCallCheck")},function(e,t){e.exports=require("@babel/runtime/helpers/createClass")},function(e,t){e.exports=require("@babel/runtime/helpers/inherits")},function(e,t){e.exports=require("@babel/runtime/helpers/possibleConstructorReturn")},function(e,t){e.exports=require("@babel/runtime/helpers/toConsumableArray")},function(e,t){e.exports=require("channelize-chat")},function(e,t){e.exports=require("react-redux")},function(e,t){e.exports=require("redux")},function(e,t){e.exports=require("moment")},function(e,t){e.exports=require("immer")},function(e,t){e.exports=require("@babel/runtime/helpers/extends")},function(e,t){e.exports=require("lodash/throttle")},function(e,t){e.exports=require("prop-types")},function(e,t){e.exports=require("lodash/debounce")},function(e,t){e.exports=require("redux-thunk")},function(e,t){e.exports=require("redux-logger")},function(e,t){e.exports=require("remote-redux-devtools")},function(e,t,n){"use strict";n.r(t);var r=n(4),a=n.n(r),o=n(5),i=n.n(o),s=n(2),c=n.n(s),l=n(6),u=n.n(l),d=n(7),p=n.n(d),m=n(3),f=n.n(m),h=n(1),v=n.n(h),g=n(0),E=n.n(g),y=n(10),S="Chat",_="This message was deleted",C="Search",N="Suggested",O="More Users",b="https://cdn.channelize.io/apps/web-widget/1.0.0/images/launcher-icon.svg",I="https://cdn.channelize.io/apps/web-widget/1.0.0/images/avtar.png",D="https://cdn.channelize.io/apps/web-widget/1.0.0/images/group.png",A=function(e,t){e({type:"CONNECT_SUCCESS",payload:t})},w=function(e,t){e({type:"CONNECT_FAIL",payload:t})};var M=function(e){return function(t){t({type:"SET_ACTIVE_CONVERSATION",payload:e})}},R=function(e){return function(t){t({type:"SET_ACTIVE_USERID",payload:e})}},U=n(14),L=n.n(U),k=E.a.createContext({client:null}),T=k.Provider;function x(e){return P(k,e)}var P=function(e,t){var n=e,r=t,a=function(e){return E.a.createElement(n.Consumer,null,(function(t){return E.a.createElement(r,L()({},t,e))}))};return a.themePath=r.themePath,a.extraThemePaths=r.extraThemePaths,a.displayName=(a.displayName=r.displayName||r.name||"Component").replace("Base",""),a};function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function F(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var a=f()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return p()(this,n)}}var G=function(e){u()(n,e);var t=F(n);function n(e){var r;return a()(this,n),r=t.call(this,e),v()(c()(r),"getContext",(function(){return{client:r.props.client}})),r.state={conversation:null,userId:null},r}return i()(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.client,n=e.userId,r=e.accessToken;t.connected?this.props.setConnected(!0):this.props.chConnect(t,n,r)}},{key:"componentDidUpdate",value:function(e){this.props.connected&&!e.connected&&this.props.connected&&this.props.registerEventHandlers(this.props.client)}},{key:"render",value:function(){this.props.connected;return E.a.createElement(T,{value:this.getContext()},this.props.children)}}]),n}(g.PureComponent);function V(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var a=f()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return p()(this,n)}}G=Object(y.connect)((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e.client)}),{chConnect:function(e,t,n){return function(r){return r({type:"CONNECTING",payload:{}}),function(e,t,n){return new Promise((function(r,a){t?n?(e||a("Channelize.io client was not created."),e.connect(t,n,(function(e,t){e?a("Channelize.io connection Failed."):r(t)}))):a("accessToken is required."):a("UserID is required.")}))}(e,t,n).then((function(e){return A(r,e)})).catch((function(e){return w(r,e)}))}},registerEventHandlers:function(e){return function(t){e.chsocket.on("user.status_updated",(function(e){t({type:"USER_STATUS_UPDATED",payload:e})})),e.chsocket.on("user.updated",(function(e){t({type:"USER_UPDATED_EVENT",payload:e})})),e.chsocket.on("user.message_created",(function(e){t({type:"NEW_MESSAGE_RECEIVED_EVENT",payload:e})})),e.chsocket.on("user.joined",(function(n){var r=n.conversation;e.Conversation.getConversation(r.id,null,(function(e,r){e||(n.conversation=r,t({type:"USER_JOINED_EVENT",payload:n}))}))})),e.chsocket.on("conversation.members_added",(function(e){t({type:"MEMBERS_ADDED_EVENT",payload:e})})),e.chsocket.on("conversation.members_removed",(function(e){t({type:"MEMBERS_REMOVED_EVENT",payload:e})})),e.chsocket.on("conversation.updated",(function(e){t({type:"CONVERSATION_UPDATED_EVENT",payload:e})})),e.chsocket.on("conversation.mark_as_read",(function(e){t({type:"MARK_AS_READ_EVENT",payload:e})})),e.chsocket.on("user.blocked",(function(e){t({type:"USER_BLOCKED_EVENT",payload:e})})),e.chsocket.on("user.unblocked",(function(e){t({type:"USER_UNBLOCKED_EVENT",payload:e})}))}},setConnected:function(){return function(e){e({type:"CONNECT_SUCCESS",payload:{}})}}})(G);var B=function(e){u()(n,e);var t=V(n);function n(e){var r;return a()(this,n),r=t.call(this,e),v()(c()(r),"toggleDropDownList",(function(){r.setState((function(e){return{showDropDownList:!e.showDropDownList}}))})),r.state={showDropDownList:!1},r}return i()(n,[{key:"render",value:function(){var e=this.props,t=e.title,n=e.subtitle,r=e.profileImageUrl,a=e.showArrowBack,o=e.onBack,i=e.showChevron,s=e.renderDropDownList,c=e.renderRight,l=this.state.showDropDownList;return E.a.createElement("div",{id:"ch_header",className:"ch-header"},a&&E.a.createElement("i",{className:"material-icons arrow-back",onClick:o},"arrow_back"),r&&E.a.createElement("div",{className:"ch-header-image",style:{backgroundImage:"url(".concat(r,")")}}),E.a.createElement("div",{className:"ch-header_details"},E.a.createElement("div",{className:"ch-header_content"},t&&E.a.createElement("div",{className:"ch-header-title"},E.a.createElement("div",null,t),i&&E.a.createElement("i",{className:"material-icons ch-chevron-icon",onClick:this.toggleDropDownList},"keyboard_arrow_down")),n&&E.a.createElement("div",{className:"ch-header-subtitle"},n),l&&s&&s()),E.a.createElement("div",{className:"ch-header_right-icons"},c&&this.props.renderRight())))}}]),n}(g.PureComponent);function q(e){var t=e.onClick;return E.a.createElement("div",{id:"ch_launcher",className:"ch-launcher",onClick:t},E.a.createElement("img",{id:"ch_launcher_image",className:"ch-launcher-image",src:b,alt:""}))}function z(e){return E.a.createElement("div",{id:"ch_conv_loader_container"},E.a.createElement("div",{id:"ch_conv_loader",className:"ch-loader"}))}var H=n(13),K=n(12),W=n.n(K);function Q(e,t){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,r=arguments.length>1?arguments[1]:void 0;return Object(H.produce)(n,(function(e){var n=t[r.type];return n?n(e,r):void 0}))}}function J(e){return e.reduce((function(e,t){return e.map((function(e){return e.id})).indexOf(t.id)<0&&e.push(t),e}),[])}Object(H.setAutoFreeze)(!1);var Y=function(e){if(e)return e.isGroup?e.profileImageUrl=e.profileImageUrl?e.profileImageUrl:D:e.user?(e.title=e.user.displayName,e.user.profileImageUrl?e.profileImageUrl=e.user.profileImageUrl:e.profileImageUrl=I):(e.title="Deleted User",e.profileImageUrl=I),e},X=function(e,t,n){var r,a=e.getCurrentUser();return n.forEach((function(e){a.id==e.ownerId&&(r=e)})),n.map((function(e,o){if(e.readByAll=null,e.showReadStatus=!1,r&&r.id==e.id&&(e.showReadStatus=!0,e.readByAll=t.readByAllMembers(e)),"createdAt"in e||(e.createdAt=Date.now()),e.time=ee(e.createdAt),e.owner||(e.owner={id:a.id,displayName:a.displayName,profileImageUrl:a.profileImageUrl}),"profileImageUrl"in e.owner||(e.owner.profileImageUrl=I),"displayName"in e.owner&&(e.owner.displayName=ae(e.owner.displayName)),e.isUser=!1,a.id==e.ownerId&&(e.isUser=!0),e.isDeleted&&(e.body="<i>"+_+"</i>"),o<n.length){var i=n[o+1];e.showOwnerAvatar=!1;var s=o==n.length-1&&a.id==e.owner.id;e.showOwnerAvatar=!(re(e,i,a)||s);var c=n[o-1];e.showDateSeparator=!ne(e,c)}return e}))},Z=function(e,t){var n,r=e.getCurrentUser(),a=t.lastMessage;if(!a)return"";if(!Object.keys(a).length)return n="";if("admin"==a.type)return n="Admin message";var o,i=a.attachments;if(i&&i.length){var s=i[0];if(a.owner.id==r.id)n="You sent a ".concat(s.type);else{var c=ae(a.owner.displayName);n="".concat(c," sent a ").concat(s.type)}return n}if(a.owner)if(a.owner.id==r.id)o="You: ";else if(t.isGroup){var l=ae(a.owner.displayName);o="".concat(l,": ")}return a.isDeleted&&(a.body="This message was deleted."),n=o?"".concat(o).concat(a.body):"".concat(a.body)};function $(e){var t=new Date,n=t.getDate(),r=t.getMonth()+1,a=t.getFullYear(),o=new Date(e),i=o.getDate(),s=o.getMonth()+1,c=o.getFullYear(),l=c==a&&s==r&&n-i<=7;if(c==a&&s==r&&i==n)return ee(o);if(l){return["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][o.getDay()]}return s+"/"+i+"/"+c}function ee(e){var t=new Date(e),n=t.getHours(),r=n>=12?"PM":"AM";return(n=n%12||12)+":"+("0"+t.getMinutes()).substr(-2)+" "+r}function te(e){var t=new Date,n=t.getDate(),r=t.getMonth()+1,a=t.getFullYear(),o=new Date(e),i=o.getDate(),s=o.getMonth()+1,c=o.getFullYear();return c==a&&s==r&&n==i?"Today":c==a&&s==r&&n-i==1?"Yesterday":s+"/"+i+"/"+c}function ne(e,t){if(!(e&&e.createdAt&&t&&t.createdAt))return!1;var n=new Date(e.createdAt),r=new Date(t.createdAt);return n.getDate()==r.getDate()}function re(e,t,n){return!(!(t&&t.owner&&e.owner)||n.id!==e.owner.id&&t.owner.id!==e.owner.id)}var ae=function(e){if(e){for(var t=0,n=(e=e.split(" ")).length;t<n;t++)e[t]?e[t]=e[t][0].toUpperCase()+e[t].substr(1):e[t]=e[t];return e.join(" ")}};function oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ie(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var a=f()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return p()(this,n)}}var se=function(e){u()(n,e);var t=ie(n);function n(e){var r;return a()(this,n),r=t.call(this,e),v()(c()(r),"selectConversation",(function(){var e=r.props,t=e.conversation,n=e.onSelect;r.props.setActiveConversation(t),n&&"function"==typeof n&&n(t)})),r}return i()(n,[{key:"render",value:function(){var e,t=this.props,n=t.client,r=t.activeConversation,a=t.conversation,o=a.lastMessage,i=Z(n,a);o.createdAt?o.time=$(o.updatedAt):o.time=$(Date()),a.user&&a.user.isOnline&&(e=E.a.createElement("span",{className:"ch-online-icon ch-show-element"}));var s={};return r&&r.id==a.id&&(s={backgroundColor:"#fafafa"}),E.a.createElement("li",{style:s,id:a.id,onClick:this.selectConversation},E.a.createElement("div",{className:"ch-conversation-image",style:{backgroundImage:"url(".concat(a.profileImageUrl,")")}},e),E.a.createElement("div",{className:"ch-conversation-content"},E.a.createElement("div",{className:"ch-conversation-content__upper"},E.a.createElement("div",{id:"ch_title"},a.title),E.a.createElement("div",{id:"ch_created_at",className:"ch-created-at"},o.time)),E.a.createElement("div",{className:"ch-conversation-content__lower"},E.a.createElement("div",{id:"ch_last_msg_box",className:"ch-last-msg-box"},E.a.createElement("div",{className:"ch-last-message"},i)))))}}]),n}(g.PureComponent);se=x(se);function ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function le(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ue(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var a=f()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return p()(this,n)}}se=Object(y.connect)((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oe(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e.conversation)}),{setActiveConversation:M})(se);var de=function(e){u()(n,e);var t=ue(n);function n(e){var r;return a()(this,n),r=t.call(this,e),v()(c()(r),"_init",(function(){var e=r.props,t=e.client;if(!e.list.length){var n=t.Conversation.createConversationListQuery();n.limit=r.limit,n.skip=r.skip,r.props.getConversationList(n)}})),v()(c()(r),"onCloseIconClick",(function(){var e=r.props.onCloseIconClick;e&&"function"==typeof e&&e()})),v()(c()(r),"onSearchIconClick",(function(){var e=r.props.onSearchIconClick;e&&"function"==typeof e&&e()})),r.limit=25,r.skip=0,r.onScroll=r.onScroll.bind(c()(r)),r.chRecentListingRef=E.a.createRef(),r}return i()(n,[{key:"componentDidMount",value:function(){this.props.connected&&this._init()}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=(t.client,t.connected),r=t.activeConversation,a=t.list;n&&(!e.connected&&this.props.connected&&this._init(),!r&&a.length&&this.props.setActiveConversation(a[0]))}},{key:"onScroll",value:function(){var e=this.props,t=e.list,n=e.client,r=e.loadingMoreConversations,a=e.allConversationsLoaded,o=this.chRecentListingRef.current;if(!(r||a||t.length<this.limit)&&o.scrollTop+o.clientHeight==o.scrollHeight){this.skip=t.length;var i=n.Conversation.createConversationListQuery();i.limit=this.limit,i.skip=this.skip,this.props.loadMoreConversations(i)}}},{key:"render",value:function(){var e,t=this,n=this.props,r=n.client,a=n.list,o=n.connecting,i=n.connected,s=n.loading,c=n.error,l=n.loadingMoreConversations,u=n.showSearchIcon,d=(n.onSearchIconClick,n.showCloseIcon),p=n.activeConversation,m=n.onSelect,f=r.getCurrentUser();return e=f&&f.profileImageUrl?f.profileImageUrl:I,a=a.map((function(e){return Y(e)})),E.a.createElement("div",{id:"ch_recent_window",className:"ch-recent-window"},E.a.createElement(B,{profileImageUrl:e,title:S,renderRight:function(){return E.a.createElement("div",null,u&&E.a.createElement("i",{title:"Search",className:"material-icons",onClick:t.onSearchIconClick},"search"),d&&E.a.createElement("i",{title:"Close",className:"material-icons",onClick:t.onCloseIconClick},"close"))}}),E.a.createElement("div",{id:"ch_recent_listing",className:"ch-recent-listing",ref:this.chRecentListingRef,onScroll:this.onScroll},(o||s)&&E.a.createElement("div",{className:"center"},E.a.createElement(z,null)),c&&E.a.createElement("div",{className:"center error"},c),i&&!a.length&&!s&&E.a.createElement("div",{className:"center no-record-found"},"No record Found"),E.a.createElement("ul",{id:"ch_recent_ul",className:"ch-recent-ul"},a.map((function(e){return E.a.createElement(se,{key:e.id,activeConversation:p,conversation:e,onSelect:m})}))),l&&E.a.createElement("div",null," Loading... ")))}}]),n}(g.PureComponent);de=x(de);function pe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var a=f()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return p()(this,n)}}de=Object(y.connect)((function(e){var t=e.conversation,n=e.client,r=e.message;return le(le(le({},t),n),{},{activeConversation:r.conversation})}),{getConversationList:function(e){return function(t){return t({type:"LOADING_CONVERSATION_LIST",payload:{}}),e.list((function(e,n){e&&t({type:"CONVERSATION_LIST_FAIL",payload:e}),t({type:"CONVERSATION_LIST_SUCCESS",payload:n})}))}},loadMoreConversations:function(e){return function(t){return t({type:"LOADING_LOAD_MORE_CONVERSATIONS",payload:{}}),e.list((function(e,n){e&&t({type:"LOAD_MORE_CONVERSATIONS_FAIL",payload:e}),t({type:"LOAD_MORE_CONVERSATIONS_SUCCESS",payload:n})}))}},setActiveConversation:M})(de);var me=function(e){u()(n,e);var t=pe(n);function n(e){return a()(this,n),t.call(this,e)}return i()(n,[{key:"showImage",value:function(e){var t=document.createElement("a");t.href=e,t.target="_blank",document.body.appendChild(t),t.click(),document.body.removeChild(t)}},{key:"downloadFile",value:function(e,t){var n=document.createElement("a");n.href=e,n.target="_blank",n.download=t,document.body.appendChild(n),n.click(),document.body.removeChild(n)}},{key:"render",value:function(){var e=this,t=this.props,n=t.client,r=t.message,a=(n.getCurrentUser(),r.isUser?"right":"left"),o=r.attachments.map((function(t){switch(t.type){case"image":return E.a.createElement("img",{className:"ch-image-message",src:t.thumbnailUrl?t.thumbnailUrl:t.fileUr,onClick:function(){return e.showImage(t.fileUrl)}});case"video":return E.a.createElement("div",{className:"ch-video-container"},E.a.createElement("img",{className:"ch-image-message",src:t.thumbnailUrl,onClick:function(){return e.showImage(t.fileUrl)}}),E.a.createElement("i",{className:"material-icons ch-video-play-icon"},"play_circle_outline"));case"application":return E.a.createElement("div",{className:"ch-text-message"},E.a.createElement("div",{className:"ch-message-body"},E.a.createElement("div",{className:"ch-docs-data"},E.a.createElement("i",{className:"material-icons ch-attachment-icon"},"description"),E.a.createElement("span",{className:"ch-docs-name"},t.name),E.a.createElement("i",{className:"material-icons ch-docs-download-icon",onClick:function(){return e.downloadFile(t.fileUrl,t.name)}},"arrow_downward")),E.a.createElement("div",{className:"ch-docs-details"},E.a.createElement("hr",null),E.a.createElement("span",null,t.extension))));default:return null}})),i=r.owner.profileImageUrl;return E.a.createElement(E.a.Fragment,null,r.showDateSeparator&&E.a.createElement("div",{key:"".concat(r.id,"-date"),className:"ch-msg-padding"},E.a.createElement("div",{className:"ch-message-date-separator"},E.a.createElement("div",{className:"message-date-separator_left"}),E.a.createElement("div",{className:"message-date-separator_text"},te(r.createdAt)),E.a.createElement("div",{className:"message-date-separator_right"}))),E.a.createElement("div",{key:r.id,className:"ch-msg-padding ".concat(a)},E.a.createElement("div",{className:"ch-msg-container"},r.showOwnerAvatar&&E.a.createElement("div",{title:r.owner.displayName,className:"ch-message-owner-avatar",style:{backgroundImage:"url(".concat(i,")")}}),E.a.createElement("div",{className:"ch-msg-content ".concat("left"!=a||r.showOwnerAvatar?"":"padding-left")},r.body&&E.a.createElement("div",{className:"ch-text-message"},r.body),o,E.a.createElement("div",{className:"message-info"},E.a.createElement("span",{id:"ch_msg_time",className:"ch-msg-time"},r.time),r.showReadStatus&&r.readByAll&&E.a.createElement("i",{id:"ch_msg_status",className:"material-icons ch-msg-status ch-msg-read-status"},"done_all"),r.showReadStatus&&!r.readByAll&&E.a.createElement("i",{id:"ch_msg_status",className:"material-icons ch-msg-status"},"done_all"))))))}}]),n}(g.Component);me=x(me);var fe=n(15),he=n.n(fe),ve=n(16),ge=n.n(ve);function Ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ye(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ee(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Se(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var a=f()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return p()(this,n)}}var _e=function(e){u()(n,e);var t=Se(n);function n(e){var r;return a()(this,n),r=t.call(this,e),v()(c()(r),"_markAsRead",(function(e){e&&e.config.typing_events&&e.markAsRead()})),v()(c()(r),"_scrollToTarget",(function(e){if(r.chMessageBoxRef){var t=r.chMessageBoxRef.current;"[object Number]"!==Object.prototype.toString.call(e)?t.scrollTop=t.scrollHeight:t.scrollTop=e}})),v()(c()(r),"_init",(function(){var e=r.props,t=e.client,n=e.conversation,a=e.userId,o=e.ownProps;if(n||a){if(!n){r.setState({dummyConversation:null});var i=t.Conversation.createConversationListQuery();a&&(i.membersExactly=a,i.isGroup=!1),i.list((function(e,n){n.length?r.props.setActiveConversation(n[0]):t.User.get(a,(function(e,t){r.setState({dummyConversation:{isGroup:!1,user:t}})}))}))}if(n){r.props.registerConversationEventHandlers(n);var s=n.createMessageListQuery();s.limit=r.limit,r.skip=0,s.skip=r.skip,r.props.getMessageList(s),n.unreadMessageCount>0&&n.markAsRead()}}else if(Object.keys(o).length){if(o.conversation){var c=o.conversation;return"open"!=c.type||c.__isWatching?void r.props.setActiveConversation(c):void c.startWatching((function(e,t){r.props.setActiveConversation(c)}))}if(o.userId)return void r.props.setActiveUserId(o.userId)}})),v()(c()(r),"onCloseIconClick",(function(){r.props.setActiveConversation(null);var e=r.props.onCloseIconClick;e&&"function"==typeof e&&e()})),r.limit=25,r.skip=0,r.handleChange=r.handleChange.bind(c()(r)),r.handleKeyUp=r.handleKeyUp.bind(c()(r)),r.sendMessage=r.sendMessage.bind(c()(r)),r.onScroll=r.onScroll.bind(c()(r)),r._markAsRead=he()(r._markAsRead,500),r.sendMedia=r.sendMedia.bind(c()(r)),r.chMessageBoxRef=E.a.createRef(),r.state={text:"",dummyConversation:null,userId:null},r}return i()(n,[{key:"componentDidMount",value:function(){this.props.connected&&this._init()}},{key:"getSnapshotBeforeUpdate",value:function(e){if(e.list.length<this.props.list.length){if(!this.chMessageBoxRef)return null;var t=this.chMessageBoxRef.current;return{scrollHeight:t.scrollHeight,offsetTop:t.scrollTop,offsetBottom:t.scrollHeight-t.scrollTop}}return null}},{key:"componentDidUpdate",value:function(e,t,n){var r=this,a=this.props,o=a.client,i=a.conversation,s=a.newMessage,c=a.userId;a.loadingMoreMessages;if(!e.connected&&this.props.connected&&this._init(),e.userId!=c&&c&&this._init(),!i&&e.sendingMessage&&!this.props.sendingMessage){this._scrollToTarget();var l=o.Conversation.createConversationListQuery();c&&(l.membersExactly=c,l.isGroup=!1),l.list((function(e,t){t.length?r.props.setActiveConversation(t[0]):o.User.get(c,(function(e,t){r.setState({dummyConversation:{isGroup:!1,user:t}})}))}))}if(i){if((!e.conversation&&i||e.conversation.id!=i.id)&&this._init(),e.loading&&!this.props.loading&&this._scrollToTarget(),!e.newMessage&&s||s&&e.newMessage.id!=s.id)this._scrollToTarget(),o.getCurrentUser().id!=s.ownerId&&this._markAsRead(i);if(e.list.length<this.props.list.length&&n){var u=this.chMessageBoxRef.current.scrollHeight-n.offsetBottom;this._scrollToTarget(u)}}}},{key:"handleChange",value:function(e){this.setState({text:e.target.value})}},{key:"handleKeyUp",value:function(e){13===e.keyCode&&(e.preventDefault(),this.sendMessage())}},{key:"sendFile",value:function(e){var t=this.props,n=t.client,r=t.conversation,a=e.type.split("/").shift();this.props.sendFileToConversation(n,r,e,{},a)}},{key:"sendMessage",value:function(){var e=this.props,t=e.conversation,n=e.client,r=e.userId,a={body:this.state.text};this.setState({text:""}),t?this.props.sendMessageToConversation(t,a):(a.userId=r,this.props.sendMessageToUserId(n,a))}},{key:"onScroll",value:function(){var e=this.props,t=e.list,n=e.conversation,r=e.loadingMoreMessages,a=e.allMessagesLoaded;if(!n)return null;var o=this.chMessageBoxRef.current;if(!(r||a||t.length<this.limit)&&o.scrollTop<o.clientHeight){this.skip=t.length;var i=n.createMessageListQuery();i.limit=this.limit,i.skip=this.skip,this.props.loadMoreMessagesAction(i)}}},{key:"blockUser",value:function(){}},{key:"unblockUser",value:function(){}},{key:"sendMedia",value:function(e){this.sendFile(e.target.files[0])}},{key:"render",value:function(){var e=this,t=this.props,n=t.client,r=t.connecting,a=t.connected,o=t.error,i=t.loading,s=t.loadingMoreMessages,c=t.list,l=t.conversation,u=t.showCloseIcon,d=t.showChevron,p=t.disableComposer,m=t.disableComposerMessage,f=t.Message,h=t.renderHeader,v=this.state,g=v.text,y=v.dummyConversation;l||(l=y,c=[]),c=X(n,l,c);var S,_,C,N,O=!1;p&&"function"==typeof p&&(O=p(l)),l&&(_=(l=Y(l)).title,C=l.profileImageUrl,!l.isGroup&&l.user&&(N=l.user.isOnline?"Online":"Last Seen "+W()(l.user.lastSeen).fromNow()),l.isGroup&&(N=l.memberCount+" Members"),S=l.isActive?E.a.createElement("div",{id:"ch_conv_block",onClick:function(){return e.blockUser()}},"Block User"):E.a.createElement("div",{id:"ch_conv_unblock",onClick:function(){return e.unblockUser()}},"Unblock User"));n.getCurrentUser();return E.a.createElement("div",{id:"ch_conv_window",className:"ch-conv-window"},l&&h&&h(l),l&&!h&&E.a.createElement(B,{profileImageUrl:C,title:_,subtitle:N,showChevron:!(!d||!S),renderDropDownList:function(){if(S)return E.a.createElement("div",{className:"ch-drop-down-list"},S)},renderRight:function(){return E.a.createElement(E.a.Fragment,null,u&&E.a.createElement("i",{title:"Close",className:"material-icons",onClick:e.onCloseIconClick},"close"))}}),E.a.createElement("div",{id:"ch_messages_box",ref:this.chMessageBoxRef,className:"ch-messages-box",onScroll:this.onScroll},E.a.createElement("div",{className:"ch-conversation-padding"}," "),(r||i)&&E.a.createElement("div",{className:"center"},E.a.createElement(z,null)),o&&E.a.createElement("div",{className:"center error"},o),E.a.createElement("div",{className:"ch-msg-list"},a&&!l&&E.a.createElement("div",{className:"center no-record-found"},"No conversation seleted"),s&&E.a.createElement(z,null),l&&!c.length&&!i&&E.a.createElement("div",{className:"center no-record-found"},"No record Found"),c.map((function(e){return E.a.createElement(f,{key:e.id,message:e})})))),l&&E.a.createElement(E.a.Fragment,null,O?E.a.createElement("div",{className:"ch-composer-disabled-box"},E.a.createElement("div",null,m)):E.a.createElement("div",{id:"ch_send_box",className:"ch-send-box"},E.a.createElement("div",{className:"ch-media-icon-box"},E.a.createElement("i",{title:"Image",className:"material-icons ch-attachment-icon"},"insert_photo"),E.a.createElement("input",{id:"ch_gallary_input",className:"ch-gallary-input",type:"file",accept:"image/*",onChange:this.sendMedia})),E.a.createElement("div",{className:"ch-media-icon-box"},E.a.createElement("i",{title:"Document",className:"material-icons ch-attachment-icon"},"description"),E.a.createElement("input",{id:"ch_document_input",className:"ch-document-input",type:"file",accept:"application/*,.doc,.docx,.xls,.ppt",onChange:this.sendMedia})),E.a.createElement("textarea",{id:"ch_input_box",className:"ch-input-box",type:"text",placeholder:"Send a message",value:g,onChange:this.handleChange,onKeyUp:this.handleKeyUp}),E.a.createElement("button",{id:"ch_send_button",className:"ch-send-button",onClick:this.sendMessage},E.a.createElement("i",{className:"ch-send-icon material-icons"},"send")))))}}]),n}(g.PureComponent);(_e=x(_e)).propTypes={Message:ge.a.elementType},_e.defaultProps={Message:me};function Ce(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var a=f()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return p()(this,n)}}_e=Object(y.connect)((function(e,t){var n=e.message,r=e.client;return ye(ye(ye({},n),r),{},{ownProps:t})}),{getMessageList:function(e){return function(t){return t({type:"LOADING_MESSAGE_LIST",payload:{}}),e.list((function(e,n){e&&t({type:"MESSAGE_LIST_FAIL",payload:e}),t({type:"MESSAGE_LIST_SUCCESS",payload:n.reverse()})}))}},sendMessageToConversation:function(e,t){return function(n){return n({type:"SENDING_MESSAGE",payload:t}),e.sendMessage(t,(function(e,r){e&&(t.error=e,n({type:"SEND_MESSAGE_FAIL",payload:t})),n({type:"SEND_MESSAGE_SUCCESS",payload:r})}))}},sendMessageToUserId:function(e,t){return function(n){return n({type:"SENDING_MESSAGE",payload:t}),e.Message.sendMessage(t,(function(e,t){e&&n({type:"SEND_MESSAGE_FAIL",payload:e}),n({type:"SEND_MESSAGE_SUCCESS",payload:t})}))}},sendFileToConversation:function(e,t,n,r,a){return function(o){o({type:"SENDING_FILE",payload:r});var i="application"!==a;e.File.upload(n,a,i,(function(e,n){return e?(r.error=e,void o({type:"SEND_FILE_FAIL",payload:r})):(r.attachments=[n],t.sendMessage(r,(function(e,t){if(e)return r.error=e,void o({type:"SEND_FILE_FAIL",payload:r});o({type:"SEND_FILE_SUCCESS",payload:t})})))}))}},loadMoreMessagesAction:function(e){return function(t){return t({type:"LOADING_LOAD_MORE_MESSAGES",payload:{}}),e.list((function(e,n){e&&t({type:"LOAD_MORE_MESSAGES_FAIL",payload:e}),t({type:"LOAD_MORE_MESSAGES_SUCCESS",payload:n.reverse()})}))}},setActiveConversation:M,setActiveUserId:R,registerConversationEventHandlers:function(e){return function(t){e.__isWatching&&e.on("watcher.message.created",(function(e){t({type:"NEW_MESSAGE_RECEIVED_EVENT",payload:e})}))}}})(_e);var Ne=function(e){u()(n,e);var t=Ce(n);function n(e){return a()(this,n),t.call(this,e)}return i()(n,[{key:"showImage",value:function(e){var t=document.createElement("a");t.href=e,t.target="_blank",document.body.appendChild(t),t.click(),document.body.removeChild(t)}},{key:"downloadFile",value:function(e,t){var n=document.createElement("a");n.href=e,n.target="_blank",n.download=t,document.body.appendChild(n),n.click(),document.body.removeChild(n)}},{key:"render",value:function(){var e=this,t=this.props,n=t.client,r=t.message,a=(n.getCurrentUser(),r.attachments.map((function(t){switch(t.type){case"image":return E.a.createElement("img",{className:"ch-image-message",src:t.thumbnailUrl?t.thumbnailUrl:t.fileUr,onClick:function(){return e.showImage(t.fileUrl)}});case"video":return E.a.createElement("div",{className:"ch-video-container"},E.a.createElement("img",{className:"ch-image-message",src:t.thumbnailUrl,onClick:function(){return e.showImage(t.fileUrl)}}),E.a.createElement("i",{className:"material-icons ch-video-play-icon"},"play_circle_outline"));case"application":return E.a.createElement("div",{className:"ch-text-message"},E.a.createElement("div",{className:"ch-message-body"},E.a.createElement("div",{className:"ch-docs-data"},E.a.createElement("i",{className:"material-icons ch-attachment-icon"},"description"),E.a.createElement("span",{className:"ch-docs-name"},t.name),E.a.createElement("i",{className:"material-icons ch-docs-download-icon",onClick:function(){return e.downloadFile(t.fileUrl,t.name)}},"arrow_downward")),E.a.createElement("div",{className:"ch-docs-details"},E.a.createElement("hr",null),E.a.createElement("span",null,t.extension))));default:return null}}))),o=r.owner.profileImageUrl;return E.a.createElement(E.a.Fragment,null,r.showDateSeparator&&E.a.createElement("div",{key:"".concat(r.id,"-date"),className:"ch-msg-padding"},E.a.createElement("div",{className:"ch-message-date-separator"},E.a.createElement("div",{className:"message-date-separator_left"}),E.a.createElement("div",{className:"message-date-separator_text"},te(r.createdAt)),E.a.createElement("div",{className:"message-date-separator_right"}))),E.a.createElement("div",{key:r.id,className:"ch-msg-padding ".concat("left")},E.a.createElement("div",{className:"ch-msg-container"},E.a.createElement("div",{title:r.owner.displayName,className:"ch-message-owner-avatar",style:{backgroundImage:"url(".concat(o,")")}}),E.a.createElement("div",{className:"ch__message-livestream__owner-name"},r.owner.displayName),E.a.createElement("div",{className:"ch-msg-content"},r.body&&E.a.createElement("div",{className:"ch__message-livestream__text"},r.body),a))))}}]),n}(g.Component);Ne=x(Ne);var Oe=n(17),be=n.n(Oe);function Ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function De(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ie(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ie(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ae(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var a=f()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return p()(this,n)}}var we=function(e){u()(n,e);var t=Ae(n);function n(e){var r;return a()(this,n),r=t.call(this,e),v()(c()(r),"_init",(function(){var e=r.props.client.User.createUserListQuery();e.limit=r.friendsLimit,e.skip=0,e.sort="isOnline DESC, displayName ASC ",r.props.getFriendsList(e)})),v()(c()(r),"_searchOnServer",(function(e){var t=r.props.client,n=t.User.createUserListQuery();n.limit=r.searchLimit,n.skip=0,n.search=e,n.sort="isOnline DESC, displayName ASC",r.props.searchFriendsAction(n);var a=t.User.createUserListQuery();a.limit=r.searchLimit,a.skip=0,a.search=e,a.sort="isOnline DESC, displayName ASC",r.props.getMoreUsersList(a)})),v()(c()(r),"clearSearch",(function(){r.setState({searchText:""})})),v()(c()(r),"onContactClick",(function(e){var t=r.props.onContactClick;r.props.setActiveUserId(e),t&&"function"==typeof t&&t(e)})),r.searchLimit=10,r.friendsLimit=50,r.state={searchText:""},r.handleChange=r.handleChange.bind(c()(r)),r._searchOnServer=be()(r._searchOnServer,800),r}return i()(n,[{key:"componentDidMount",value:function(){this.props.connected&&this._init()}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=(t.client,t.connected);n&&!e.connected&&n&&this._init()}},{key:"handleChange",value:function(e){var t=e.target.value;this.setState({searchText:t}),t&&this._searchOnServer(t)}},{key:"render",value:function(){var e=this,t=this.props,n=t.connecting,r=t.connected,a=t.loadingFriendsList,o=t.loadingSearchFriends,i=t.friendslist,s=t.moreUsersList,c=t.searchFriends,l=t.showArrowBack,u=t.onBack,d=this.state.searchText,p=i;d?p=c:s=[];var m=!!s.length;return E.a.createElement("div",{id:"ch_search_window",className:"ch-search-window"},E.a.createElement(B,{showArrowBack:l,onBack:u,title:C}),E.a.createElement("div",{id:"ch_search_box",className:"ch-search-box"},E.a.createElement("input",{placeholder:"Search",id:"ch_search_input_box",className:"ch-search-input-box",value:d,onChange:this.handleChange}),d&&E.a.createElement("i",{id:"ch_clear_search_icon",className:"material-icons ch-clear-search-icon",onClick:this.clearSearch},"close")),E.a.createElement("div",{id:"ch_friends_box",className:"ch-friends-box"},(n||a)&&E.a.createElement("div",{className:"center"},E.a.createElement(z,null)),o&&E.a.createElement("div",null,E.a.createElement(z,null)),r&&d&&!p.length&&!m&&!a&&!o&&E.a.createElement("div",{className:"center no-record-found"},"No Record Found"),E.a.createElement("div",{id:"ch_suggested_box"},!d&&!a&&E.a.createElement("div",{id:"ch_suggested",className:"ch-suggested"},N),p.map((function(t){var n=t.profileImageUrl?t.profileImageUrl:I;return E.a.createElement("li",{key:t.id,id:t.id,className:"ch-friends-list",onClick:function(){return e.onContactClick(t.id)}},E.a.createElement("div",{className:"ch-contact-img",style:{backgroundImage:"url(".concat(n,")")}},t.isOnline&&E.a.createElement("span",{className:"ch-online-icon ch-show-element"})),E.a.createElement("div",{id:"ch_friend_name",className:"ch-friend-name"},t.displayName))}))),m&&E.a.createElement("div",{id:"ch_users_box"},E.a.createElement("div",{id:"ch_more_users",className:"ch-more-users"},O),s.map((function(t){var n=t.profileImageUrl?t.profileImageUrl:I;return E.a.createElement("li",{key:t.id,id:t.id,className:"ch-friends-list",onClick:function(){return e.onContactClick(t.id)}},E.a.createElement("div",{className:"ch-contact-img",style:{backgroundImage:"url(".concat(n,")")}},t.isOnline&&E.a.createElement("span",{className:"ch-online-icon ch-show-element"})),E.a.createElement("div",{id:"ch_friend_name",className:"ch-friend-name"},t.displayName))})))))}}]),n}(g.PureComponent);we=x(we);we=Object(y.connect)((function(e){var t=e.user,n=e.client;return De(De({},t),n)}),{getFriendsList:function(e){return function(t){return t({type:"LOADING_FRIENDS_LIST",payload:{}}),e.friendsList((function(e,n){e&&t({type:"FRIENDS_LIST_FAIL",payload:e}),t({type:"FRIENDS_LIST_SUCCESS",payload:n})}))}},loadMoreFriends:function(e){return function(t){return t({type:"LOADING_LOAD_MORE_FRIENDS",payload:{}}),e.friendsList((function(e,n){e&&t({type:"LOAD_MORE_FRIENDS_FAIL",payload:e}),t({type:"LOAD_MORE_FRIENDS_SUCCESS",payload:n})}))}},getMoreUsersList:function(e){return function(t){return t({type:"LOADING_MORE_USERS_LIST",payload:{}}),e.usersList((function(e,n){e&&t({type:"MORE_USERS_LIST_FAIL",payload:e}),t({type:"MORE_USERS_LIST_SUCCESS",payload:n})}))}},searchFriendsAction:function(e){return function(t){return t({type:"LOADING_SEARCH_FRIENDS",payload:{}}),e.friendsList((function(e,n){e&&t({type:"SEARCH_FRIENDS_FAIL",payload:e}),t({type:"SEARCH_FRIENDS_SUCCESS",payload:n})}))}},setActiveUserId:R})(we);var Me=n(11),Re=n(18),Ue=n.n(Re);n(19),n(20);function Le(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Le(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Le(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Te,xe,Pe={connecting:!1,connected:!1,error:null},je=n(8),Fe=n.n(je),Ge=Q({list:[],loading:!1,loadingMoreConversations:!1,allConversationsLoaded:!1,error:null},(Te={},v()(Te,"LOADING_CONVERSATION_LIST",(function(e,t){e.loading=!0})),v()(Te,"CONVERSATION_LIST_FAIL",(function(e,t){e.loading=!1,e.error=t.payload})),v()(Te,"CONVERSATION_LIST_SUCCESS",(function(e,t){e.loading=!1,e.list=t.payload})),v()(Te,"LOADING_LOAD_MORE_CONVERSATIONS",(function(e,t){e.loadingMoreConversations=!0})),v()(Te,"LOAD_MORE_CONVERSATIONS_FAIL",(function(e,t){e.loadingMoreConversations=!1,e.error=t.payload})),v()(Te,"LOAD_MORE_CONVERSATIONS_SUCCESS",(function(e,t){e.loadingMoreConversations=!1,t.payload.length?(e.list=[].concat(Fe()(e.list),Fe()(t.payload)),e.list=J(e.list)):e.allConversationsLoaded=!0})),v()(Te,"USER_STATUS_UPDATED",(function(e,t){var n=t.payload.user,r=e.list.map((function(e,t){return e.isGroup||e.user.id!=n.id||(e.user.isOnline=n.isOnline,e.user.lastSeen=n.lastSeen),e}));e.list=r})),v()(Te,"NEW_MESSAGE_RECEIVED_EVENT",(function(e,t){var n,r,a=t.payload.message,o=e.list.map((function(e,o){return e.id==a.conversationId?(e.lastMessage=a,e.updatedAt=t.payload.timestamp,n=o,r=e,e):e}));n>0&&(o.splice(n,1),o.unshift(r)),e.list=o})),v()(Te,"USER_JOINED_EVENT",(function(e,t){var n=t.payload.conversation;e.list=[n].concat(Fe()(e.list)),e.list=J(e.list)})),v()(Te,"MEMBERS_ADDED_EVENT",(function(e,t){var n,r,a=t.payload,o=a.conversation,i=a.members,s=a.timestamp,c=e.list.map((function(e,t){return e.id==o.id?(e.memberCount=o.memberCount,e.updatedAt=s,e.members=e.members.concat(i),n=t,r=e,e):e}));n>0&&(c.splice(n,1),c.unshift(r)),e.list=c})),v()(Te,"MEMBERS_REMOVED_EVENT",(function(e,t){var n,r,a=t.payload,o=a.conversation,i=a.members,s=a.timestamp,c=e.list.map((function(e,t){return e.id==o.id?(e.memberCount=o.memberCount,e.updatedAt=s,i.forEach((function(t){var n=e.members.findIndex((function(e){return e.userId==t.id}));n>=0&&e.members.splice(n,1)})),n=t,r=e,e):e}));n>0&&(c.splice(n,1),c.unshift(r)),e.list=c})),v()(Te,"CONVERSATION_UPDATED_EVENT",(function(e,t){var n,r,a=t.payload.conversation,o=e.list.map((function(e,o){return e.id==a.id?(e.title=a.title,e.profileImageUrl=a.profileImageUrl,e.updatedAt=t.payload.timestamp,n=o,r=e,e):e}));n>0&&(o.splice(n,1),o.unshift(r)),e.list=o})),v()(Te,"USER_UPDATED_EVENT",(function(e,t){var n=t.payload.user,r=e.list.map((function(e,t){return e.isGroup||e.user.id!=n.id||(e.user.isOnline=n.isOnline,e.user.lastSeen=n.lastSeen,e.user.displayName=n.displayName,e.user.profileImageUrl=n.profileImageUrl),e}));e.list=r})),v()(Te,"MARK_AS_READ_EVENT",(function(e,t){var n=t.payload,r=n.conversation,a=n.user,o=n.timestamp,i=e.list.map((function(e,t){return e.id==r.id?(e.lastReadAt[a.id]&&(e.lastReadAt[a.id]=o),e):e}));e.list=i})),Te)),Ve=n(9);function Be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Be(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Be(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ze,He=Q({list:[],loading:!1,error:null,loadingMoreMessages:!1,allMessagesLoaded:!1,sendingMessage:!1,conversation:null,userId:null,newMessage:null},(xe={},v()(xe,"LOADING_MESSAGE_LIST",(function(e,t){e.loading=!0,e.list=[],e.allMessagesLoaded=!1})),v()(xe,"MESSAGE_LIST_SUCCESS",(function(e,t){e.loading=!1,e.list=t.payload})),v()(xe,"MESSAGE_LIST_FAIL",(function(e,t){e.loading=!1,e.error=t.payload})),v()(xe,"SENDING_MESSAGE",(function(e,t){e.sendingMessage=!0})),v()(xe,"SEND_MESSAGE_SUCCESS",(function(e,t){e.sendingMessage=!1,e.list=[].concat(Fe()(e.list),[t.payload]),e.list=J(e.list)})),v()(xe,"SEND_MESSAGE_FAIL",(function(e,t){t.payload.status="failed",e.list=[].concat(Fe()(e.list),[t.payload]),e.list=J(e.list)})),v()(xe,"LOADING_LOAD_MORE_MESSAGES",(function(e,t){e.loadingMoreMessages=!0})),v()(xe,"LOAD_MORE_MESSAGES_SUCCESS",(function(e,t){e.loadingMoreMessages=!1,t.payload.length?(e.list=[].concat(Fe()(t.payload),Fe()(e.list)),e.list=J(e.list)):e.allMessagesLoaded=!0})),v()(xe,"LOAD_MORE_MESSAGES_FAIL",(function(e,t){e.loadingMoreMessages=!1,e.error=t.payload})),v()(xe,"SET_ACTIVE_CONVERSATION",(function(e,t){e.conversation=t.payload,e.userId=null})),v()(xe,"SET_ACTIVE_USERID",(function(e,t){e.userId=t.payload,e.conversation=null})),v()(xe,"CONVERSATION_UPDATED_EVENT",(function(e,t){var n=t.payload.conversation,r=n.id,a=n.title,o=n.profileImageUrl;if(e.conversation&&e.conversation.id==r){var i=qe(qe({},e.conversation.toJSON()),{},{title:a,profileImageUrl:o,updatedAt:t.payload.timestamp}),s=Ve.Channelize.core.Client.getInstance();e.conversation=new Ve.Channelize.core.Conversation.Model(s,i)}})),v()(xe,"MEMBERS_ADDED_EVENT",(function(e,t){var n=t.payload,r=n.conversation,a=n.members,o=n.timestamp;if(e.conversation&&e.conversation.id==r.id){var i=e.conversation.toJSON();i.members=i.members.concat(a),i.memberCount=r.memberCount,i.updatedAt=o;var s=Ve.Channelize.core.Client.getInstance();e.conversation=new Ve.Channelize.core.Conversation.Model(s,i)}})),v()(xe,"MEMBERS_REMOVED_EVENT",(function(e,t){var n=t.payload,r=n.conversation,a=n.members,o=n.timestamp;if(e.conversation&&e.conversation.id==r.id){var i=e.conversation.toJSON();i.memberCount=r.memberCount,i.updatedAt=o,a.forEach((function(e){var t=i.members.findIndex((function(t){return t.userId==e.id}));t>=0&&i.members.splice(t,1)}));var s=Ve.Channelize.core.Client.getInstance();e.conversation=new Ve.Channelize.core.Conversation.Model(s,i)}})),v()(xe,"NEW_MESSAGE_RECEIVED_EVENT",(function(e,t){var n=t.payload.message;e.conversation&&e.conversation.id==n.conversationId&&(e.list=[].concat(Fe()(e.list),[n]),e.list=J(e.list),e.newMessage=n)})),v()(xe,"USER_STATUS_UPDATED",(function(e,t){var n=t.payload.user;if(e.conversation&&!e.conversation.isGroup&&e.conversation.user.id==n.id){var r=e.conversation.toJSON();r.user.isOnline=n.isOnline,r.user.lastSeen=n.lastSeen;var a=Ve.Channelize.core.Client.getInstance();e.conversation=new Ve.Channelize.core.Conversation.Model(a,r)}})),v()(xe,"USER_UPDATED_EVENT",(function(e,t){var n=t.payload.user;if(e.conversation&&!e.conversation.isGroup&&e.conversation.user.id==n.id){var r=e.conversation.toJSON();r.user.isOnline=n.isOnline,r.user.lastSeen=n.lastSeen,r.user.displayName=n.displayName,r.user.profileImageUrl=n.profileImageUrl;var a=Ve.Channelize.core.Client.getInstance();e.conversation=new Ve.Channelize.core.Conversation.Model(a,r)}})),v()(xe,"MARK_AS_READ_EVENT",(function(e,t){var n=t.payload,r=n.conversation,a=n.user,o=n.timestamp;if(e.conversation&&e.conversation.id==r.id){var i=e.conversation.toJSON();i.lastReadAt[a.id]&&(i.lastReadAt[a.id]=o);var s=Ve.Channelize.core.Client.getInstance();e.conversation=new Ve.Channelize.core.Conversation.Model(s,i)}})),xe)),Ke=Q({friendslist:[],loadingFriendsList:!1,error:null,loadingMoreFriends:!1,allFriendsLoaded:!1,moreUsersList:[],loadingMoreUsersList:!1,searchFriends:[],loadingSearchFriends:!1},(ze={},v()(ze,"LOADING_FRIENDS_LIST",(function(e,t){e.loadingFriendsList=!0,e.allFriendsLoaded=!1,e.friendslist=[]})),v()(ze,"FRIENDS_LIST_SUCCESS",(function(e,t){e.loadingFriendsList=!1,e.friendslist=t.payload})),v()(ze,"FRIENDS_LIST_FAIL",(function(e,t){e.loadingFriendsList=!1,e.error=t.payload})),v()(ze,"LOADING_LOAD_MORE_FRIENDS",(function(e,t){e.loadingMoreFriends=!0})),v()(ze,"LOAD_MORE_FRIENDS_SUCCESS",(function(e,t){e.loadingMoreFriends=!1,t.payload.length?(e.friendslist=[].concat(Fe()(e.friendslist),Fe()(t.payload)),e.friendslist=J(e.friendslist)):e.allFriendsLoaded=!0})),v()(ze,"LOAD_MORE_FRIENDS_FAIL",(function(e,t){e.loadingMoreFriends=!1,e.error=t.payload})),v()(ze,"LOADING_MORE_USERS_LIST",(function(e,t){e.loadingMoreUsersList=!0,e.moreUsersList=[]})),v()(ze,"MORE_USERS_LIST_SUCCESS",(function(e,t){e.loadingMoreUsersList=!1,e.moreUsersList=t.payload})),v()(ze,"MORE_USERS_LIST_FAIL",(function(e,t){e.loadingMoreUsersList=!1,e.error=t.payload})),v()(ze,"LOADING_SEARCH_FRIENDS",(function(e,t){e.loadingSearchFriends=!0,e.searchFriends=[]})),v()(ze,"SEARCH_FRIENDS_SUCCESS",(function(e,t){e.loadingSearchFriends=!1,e.searchFriends=t.payload})),v()(ze,"SEARCH_FRIENDS_FAIL",(function(e,t){e.loadingSearchFriends=!1,e.error=t.payload})),ze)),We=Object(Me.combineReducers)({client:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CONNECTING":return ke(ke({},e),{},{connecting:!0});case"CONNECT_SUCCESS":return ke(ke({},e),{},{connected:!0,connecting:!1});case"CONNECT_FAIL":return ke(ke({},e),{},{connected:!1,error:t.payload,connecting:!1});case"DISCONNECT_SUCCESS":return ke(ke({},e),{},{connected:!1});case"DISCONNECT_FAIL":return ke(ke({},e),{},{connected:!0,error:t.payload});default:return e}},conversation:Ge,message:He,user:Ke}),Qe=[Ue.a];var Je=Me.compose.apply(void 0,[Me.applyMiddleware.apply(void 0,Qe)].concat([])),Ye=Object(Me.createStore)(We,{},Je);n.d(t,"App",(function(){return G})),n.d(t,"Header",(function(){return B})),n.d(t,"Launcher",(function(){return q})),n.d(t,"Loader",(function(){return z})),n.d(t,"ConversationList",(function(){return de})),n.d(t,"ConversationItem",(function(){return se})),n.d(t,"ConversationWindow",(function(){return _e})),n.d(t,"MessageSimple",(function(){return me})),n.d(t,"MessageLivestream",(function(){return Ne})),n.d(t,"SearchWindow",(function(){return we})),n.d(t,"createReducer",(function(){return Q})),n.d(t,"uniqueList",(function(){return J})),n.d(t,"modifyConversation",(function(){return Y})),n.d(t,"modifyMessageList",(function(){return X})),n.d(t,"getLastMessageString",(function(){return Z})),n.d(t,"lastMessageTimeParser",(function(){return $})),n.d(t,"AMorPMTimeParser",(function(){return ee})),n.d(t,"dateSeparatorParser",(function(){return te})),n.d(t,"isSameDay",(function(){return ne})),n.d(t,"isSameUser",(function(){return re})),n.d(t,"capitalize",(function(){return ae})),n.d(t,"ChannelizeContext",(function(){return k})),n.d(t,"ChannelizeProvider",(function(){return T})),n.d(t,"withChannelizeContext",(function(){return x})),n.d(t,"store",(function(){return Ye}))}]);
//# sourceMappingURL=index.js.map