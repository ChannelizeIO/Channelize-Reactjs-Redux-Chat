module.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=23)}([function(e,t){e.exports=require("react")},function(e,t){e.exports=require("@babel/runtime/helpers/defineProperty")},function(e,t){e.exports=require("@babel/runtime/helpers/assertThisInitialized")},function(e,t){e.exports=require("@babel/runtime/helpers/getPrototypeOf")},function(e,t){e.exports=require("@babel/runtime/helpers/classCallCheck")},function(e,t){e.exports=require("@babel/runtime/helpers/createClass")},function(e,t){e.exports=require("@babel/runtime/helpers/inherits")},function(e,t){e.exports=require("@babel/runtime/helpers/possibleConstructorReturn")},function(e,t){e.exports=require("@babel/runtime/helpers/toConsumableArray")},function(e,t){e.exports=require("channelize-chat")},function(e,t){e.exports=require("react-redux")},function(e,t){e.exports=require("prop-types")},function(e,t){e.exports=require("redux")},function(e,t){e.exports=require("lodash/debounce")},function(e,t){e.exports=require("uuid")},function(e,t){e.exports=require("moment")},function(e,t){e.exports=require("immer")},function(e,t){e.exports=require("lodash/throttle")},function(e,t){e.exports=require("@babel/runtime/helpers/extends")},function(e,t){e.exports=require("redux-thunk")},function(e,t){e.exports=require("sprintf-js")},function(e,t){e.exports=require("redux-logger")},function(e,t){e.exports=require("remote-redux-devtools")},function(e,t,n){"use strict";n.r(t);var r=n(4),a=n.n(r),o=n(5),i=n.n(o),s=n(2),c=n.n(s),l=n(6),u=n.n(l),d=n(7),p=n.n(d),m=n(3),f=n.n(m),h=n(1),v=n.n(h),E=n(0),g=n.n(E),y=n(10),_="Chat",S="Deleted Member",C="This message was deleted",N="Send a message",O="Share photo & video",b="Share a document",M="Search",D="Suggested",I="More Users",w="File",A="You",R="Send",L={admin_group_create:"%s created group %s",admin_group_join:"%s joined",admin_group_add_members:"%s added %s",admin_group_remove_members:"%s removed %s",admin_group_leave:"%s left",admin_group_make_admin:"%s are now an admin",admin_group_change_title:"%s changed the title to %s",admin_group_change_photo:"%s changed group photo",admin_call_video_missed:"%s missed a video call from %s",admin_call_voice_missed:"%s missed a voice call from %s"},k={admin_call_rejected:"Call Rejected",admin_call_completed:"Call Completed",admin_call_not_answered:"Call Not Answered",admin_call_missed:"Missed Call"},T="https://cdn.channelize.io/apps/web-widget/1.0.0/images/launcher-icon.svg",U="https://cdn.channelize.io/apps/web-widget/1.0.0/images/avtar.png",F="https://cdn.channelize.io/apps/web-widget/1.0.0/images/group.png",j=function(e,t){e({type:"CONNECT_SUCCESS",payload:t})},x=function(e,t){e({type:"CONNECT_FAIL",payload:t})};var P=function(e){return function(t){t({type:"SET_ACTIVE_CONVERSATION",payload:e})}},G=function(e){return function(t){t({type:"SET_ACTIVE_USERID",payload:e})}},V=n(18),B=n.n(V),q=g.a.createContext({client:null}),H=q.Provider;function z(e){return Y(q,e)}var Y=function(e,t){var n=e,r=t,a=function(e){return g.a.createElement(n.Consumer,null,(function(t){return g.a.createElement(r,B()({},t,e))}))};return a.themePath=r.themePath,a.extraThemePaths=r.extraThemePaths,a.displayName=(a.displayName=r.displayName||r.name||"Component").replace("Base",""),a};function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function K(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var a=f()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return p()(this,n)}}var Q=function(e){u()(n,e);var t=K(n);function n(e){var r;return a()(this,n),r=t.call(this,e),v()(c()(r),"getContext",(function(){return{client:r.props.client}})),r.state={conversation:null,userId:null},r}return i()(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.client,n=e.userId,r=e.accessToken;t.connected?this.props.setConnected(!0):this.props.chConnect(t,n,r)}},{key:"componentDidUpdate",value:function(e){this.props.connected&&!e.connected&&this.props.connected&&this.props.registerEventHandlers(this.props.client)}},{key:"render",value:function(){this.props.connected;return g.a.createElement(H,{value:this.getContext()},this.props.children)}}]),n}(E.PureComponent);function J(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var a=f()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return p()(this,n)}}Q=Object(y.connect)((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e.client)}),{chConnect:function(e,t,n){return function(r){return r({type:"CONNECTING",payload:{}}),function(e,t,n){return new Promise((function(r,a){t?n?(e||a("Channelize.io client was not created."),e.connect(t,n,(function(e,t){e?a("Channelize.io connection Failed."):r(t)}))):a("accessToken is required."):a("UserID is required.")}))}(e,t,n).then((function(e){return j(r,e)})).catch((function(e){return x(r,e)}))}},registerEventHandlers:function(e){return function(t){e.chsocket.on("user.status_updated",(function(e){t({type:"USER_STATUS_UPDATED",payload:e})})),e.chsocket.on("user.updated",(function(e){t({type:"USER_UPDATED_EVENT",payload:e})})),e.chsocket.on("user.message_created",(function(e){t({type:"NEW_MESSAGE_RECEIVED_EVENT",payload:e})})),e.chsocket.on("message.deleted_for_everyone",(function(e){t({type:"DELETE_MESSAGE_FOR_EVERYONE_EVENT",payload:e})})),e.chsocket.on("user.message_deleted",(function(n){var r=n.conversation;e.Conversation.getConversation(r.id,null,(function(e,r){e||(n.conversation=r,t({type:"DELETE_MESSAGE_EVENT",payload:n}))}))})),e.chsocket.on("user.joined",(function(n){var r=n.conversation;e.Conversation.getConversation(r.id,null,(function(e,r){e||(n.conversation=r,t({type:"USER_JOINED_EVENT",payload:n}))}))})),e.chsocket.on("conversation.members_added",(function(e){t({type:"MEMBERS_ADDED_EVENT",payload:e})})),e.chsocket.on("conversation.members_removed",(function(e){t({type:"MEMBERS_REMOVED_EVENT",payload:e})})),e.chsocket.on("conversation.updated",(function(e){t({type:"CONVERSATION_UPDATED_EVENT",payload:e})})),e.chsocket.on("conversation.mark_as_read",(function(e){t({type:"MARK_AS_READ_EVENT",payload:e})})),e.chsocket.on("conversation.typing",(function(e){t({type:"TYPING_EVENT",payload:e})})),e.chsocket.on("user.blocked",(function(e){t({type:"USER_BLOCKED_EVENT",payload:e})})),e.chsocket.on("user.unblocked",(function(e){t({type:"USER_UNBLOCKED_EVENT",payload:e})}))}},setConnected:function(){return function(e){e({type:"CONNECT_SUCCESS",payload:{}})}}})(Q);var X=function(e){u()(n,e);var t=J(n);function n(e){var r;return a()(this,n),r=t.call(this,e),v()(c()(r),"toggleDropDownList",(function(){r.setState((function(e){return{showDropDownList:!e.showDropDownList}}))})),r.state={showDropDownList:!1},r}return i()(n,[{key:"render",value:function(){var e=this.props,t=e.title,n=e.subtitle,r=e.profileImageUrl,a=e.showArrowBack,o=e.onBack,i=e.showChevron,s=e.renderDropDownList,c=e.renderRight,l=e.callButtons,u=this.state.showDropDownList;return g.a.createElement("div",{id:"ch_header",className:"ch-header"},a&&g.a.createElement("i",{className:"material-icons arrow-back",onClick:o},"arrow_back"),r&&g.a.createElement("div",{className:"ch-header-image",style:{backgroundImage:"url(".concat(r,")")}}),g.a.createElement("div",{className:"ch-header_details"},g.a.createElement("div",{className:"ch-header_content"},t&&g.a.createElement("div",{className:"ch-header-title"},g.a.createElement("div",null,t),i&&g.a.createElement("i",{className:"material-icons ch-chevron-icon",onClick:this.toggleDropDownList},"keyboard_arrow_down")),n&&g.a.createElement("div",{className:"ch-header-subtitle"},n),u&&s&&s()),l,g.a.createElement("div",{className:"ch-header_right-icons"},c&&this.props.renderRight())))}}]),n}(E.PureComponent);function Z(e){var t=e.onClick;return g.a.createElement("div",{id:"ch_launcher",className:"ch-launcher",onClick:t},g.a.createElement("img",{id:"ch_launcher_image",className:"ch-launcher-image",src:T,alt:""}))}function $(e){return g.a.createElement("div",{id:"ch_conv_loader_container"},g.a.createElement("div",{id:"ch_conv_loader",className:"ch-loader"}))}var ee=n(16),te=n(15),ne=n.n(te),re=n(20).sprintf;function ae(e,t){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,r=arguments.length>1?arguments[1]:void 0;return Object(ee.produce)(n,(function(e){var n=t[r.type];return n?n(e,r):void 0}))}}function oe(e){return e.reduce((function(e,t){var n=e.map((function(e){return e.id}));return n.indexOf(t.id)<0?e.push(t):e.splice(n.indexOf(t.id),1,t),e}),[])}Object(ee.setAutoFreeze)(!1);var ie=function(e){if(e)return e.isGroup?e.profileImageUrl=e.profileImageUrl?e.profileImageUrl:F:e.user?(e.title=e.user.displayName,e.user.profileImageUrl?e.profileImageUrl=e.user.profileImageUrl:e.profileImageUrl=U):(e.title="Deleted User",e.profileImageUrl=U),e.otherMemberIds=[],e.members&&e.members.map((function(t){t.userId!=e._client.loginUser.id&&e.otherMemberIds.push(t.userId)})),e},se=function(e,t,n){var r,a=e.getCurrentUser();return n.forEach((function(e){a.id==e.ownerId&&(r=e)})),n.map((function(e,o){if(e.readByAll=null,e.showReadStatus=!1,r&&r.id==e.id&&(e.showReadStatus=!0,e.readByAll=!e.pending&&t.readByAllMembers(e)),"createdAt"in e||(e.createdAt=Date.now()),e.time=ue(e.createdAt),e.owner||(e.owner={id:a.id,displayName:a.displayName,profileImageUrl:a.profileImageUrl}),"profileImageUrl"in e.owner||(e.owner.profileImageUrl=U),"displayName"in e.owner&&(e.owner.displayName=he(e.owner.displayName)),e.isUser=!1,a.id==e.ownerId&&(e.isUser=!0),e.isDeleted&&(e.body=C),o<n.length){var i=n[o+1];e.showOwnerAvatar=!1;var s=o==n.length-1&&a.id==e.owner.id;e.showOwnerAvatar=!(fe(e,i,a)||s||e.isUser);var c=n[o-1];e.showDateSeparator=!pe(e,c)}return"admin"==e.type&&(e.system=!0,e=ve(a,e)),e}))},ce=function(e,t){var n,r=e.getCurrentUser(),a=t.lastMessage;if(!Object.keys(a).length)return n="";if("admin"==a.type)return n="Admin message";var o,i=a.attachments;if(i&&i.length){var s=i[0];if(a.owner.id==r.id)n="You sent a ".concat(s.type);else{var c=he(a.owner.displayName);n="".concat(c," sent a ").concat(s.type)}return n}if(a.owner)if(a.owner.id==r.id)o="You: ";else if(t.isGroup){var l=he(a.owner.displayName);o="".concat(l,": ")}return a.isDeleted&&(a.body="This message was deleted."),n=o?"".concat(o).concat(a.body):"".concat(a.body)};function le(e){var t=new Date,n=t.getDate(),r=t.getMonth()+1,a=t.getFullYear(),o=new Date(e),i=o.getDate(),s=o.getMonth()+1,c=o.getFullYear(),l=c==a&&s==r&&n-i<=7;if(c==a&&s==r&&i==n)return ue(o);if(l){return["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][o.getDay()]}return s+"/"+i+"/"+c}function ue(e){var t=new Date(e),n=t.getHours(),r=n>=12?"PM":"AM";return(n=n%12||12)+":"+("0"+t.getMinutes()).substr(-2)+" "+r}function de(e){var t=new Date,n=t.getDate(),r=t.getMonth()+1,a=t.getFullYear(),o=new Date(e),i=o.getDate(),s=o.getMonth()+1,c=o.getFullYear();return c==a&&s==r&&n==i?"Today":c==a&&s==r&&n-i==1?"Yesterday":s+"/"+i+"/"+c}function pe(e,t){if(!(e&&e.createdAt&&t&&t.createdAt))return!1;var n=new Date(e.createdAt),r=new Date(t.createdAt);return n.getDate()==r.getDate()}var me=function(e){if(!e.length)return null;if(1==(e=e.map((function(e){return he(e.displayName.trim().split(" ")[0])}))).length)return"".concat(e[0]," is typing...");if(2==e.length){var t=e[0];e[1];return"".concat(t," and {secondUser} are typing...")}if(e.length>2){var n=e.slice(0,-1).join(", ");e.slice(-1);return"".concat(n," and {lastuser} are typing...")}};function fe(e,t,n){return!(!(t&&t.owner&&e.owner)||n.id!==e.owner.id&&t.owner.id!==e.owner.id)}var he=function(e){if(e){for(var t=0,n=(e=e.split(" ")).length;t<n;t++)e[t]?e[t]=e[t][0].toUpperCase()+e[t].substr(1):e[t]=e[t];return e.join(" ")}},ve=function(e,t){if("admin"!=t.type)return t;var n=t.attachments;if(!n.length)return t;var r,a,o=n[0],i=o.metaData;if("voice"==i.type||"video"==i.type){var s=i.duration?" "+function(e){e=Number(e);var t=Math.floor(e/3600),n=Math.floor(e%3600/60),r=Math.floor(e%3600%60);return(t>0?t+"h ":"")+(n>0?n+"m ":"")+(r>0?r+"s ":"")}(i.duration):"";return t.text=k[o.adminMessageType]+s,t}"user"==i.subType&&(r=e.id==i.subId?A:i.subUser?he(i.subUser.displayName):S);i.objType;var c=i.objValues;if("user"==i.objType)a=i.objUsers?e.id==i.objUsers.id?A:he(i.objUsers.displayName):S;else if("users"==i.objType&&Array.isArray(c)){var l=[];c.forEach((function(e){var t,n=i.objUsers.find((function(t){return t&&t.id==e}));t=n?he(n.displayName):S,l.push(t)})),a=l.join(", ")}else"group"==i.objType&&(a="string"==typeof c?he(c):c);var u=L[o.adminMessageType];return u&&(t.text=re(u,r,a)),t};function Ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ge(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var a=f()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return p()(this,n)}}var ye=function(e){u()(n,e);var t=ge(n);function n(e){var r;return a()(this,n),r=t.call(this,e),v()(c()(r),"selectConversation",(function(){var e=r.props,t=e.conversation,n=e.onSelect;r.props.setActiveConversation(t),n&&"function"==typeof n&&n(t)})),r}return i()(n,[{key:"render",value:function(){var e,t=this.props,n=t.client,r=t.activeConversation,a=t.conversation,o=a.lastMessage,i=ce(n,a);o.createdAt?o.time=le(o.updatedAt):o.time=le(Date()),a.user&&a.user.isOnline&&(e=g.a.createElement("span",{className:"ch-online-icon ch-show-element"}));var s={};return r&&r.id==a.id&&(s={backgroundColor:"#fafafa"}),g.a.createElement("li",{style:s,id:a.id,onClick:this.selectConversation},g.a.createElement("div",{className:"ch-conversation-image",style:{backgroundImage:"url(".concat(a.profileImageUrl,")")}},e),g.a.createElement("div",{className:"ch-conversation-content"},g.a.createElement("div",{className:"ch-conversation-content__upper"},g.a.createElement("div",{id:"ch_title"},a.title),g.a.createElement("div",{id:"ch_created_at",className:"ch-created-at"},o.time)),g.a.createElement("div",{className:"ch-conversation-content__lower"},g.a.createElement("div",{id:"ch_last_msg_box",className:"ch-last-msg-box"},g.a.createElement("div",{className:"ch-last-message"},i)))))}}]),n}(E.PureComponent);ye=z(ye);function _e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_e(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ce(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var a=f()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return p()(this,n)}}ye=Object(y.connect)((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ee(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e.conversation)}),{setActiveConversation:P})(ye);var Ne=function(e){u()(n,e);var t=Ce(n);function n(e){var r;return a()(this,n),r=t.call(this,e),v()(c()(r),"_init",(function(){var e=r.props,t=e.client;if(!e.list.length){var n=t.Conversation.createConversationListQuery();n.limit=r.limit,n.skip=r.skip,n.include="members",r.props.getConversationList(n)}})),v()(c()(r),"onCloseIconClick",(function(){var e=r.props.onCloseIconClick;e&&"function"==typeof e&&e()})),v()(c()(r),"onSearchIconClick",(function(){var e=r.props.onSearchIconClick;e&&"function"==typeof e&&e()})),r.limit=25,r.skip=0,r.onScroll=r.onScroll.bind(c()(r)),r.chRecentListingRef=g.a.createRef(),r}return i()(n,[{key:"componentDidMount",value:function(){this.props.connected&&this._init()}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=(t.client,t.connected),r=t.activeConversation,a=t.list;n&&(!e.connected&&this.props.connected&&this._init(),!r&&a.length&&this.props.setActiveConversation(a[0]))}},{key:"onScroll",value:function(){var e=this.props,t=e.list,n=e.client,r=e.loadingMoreConversations,a=e.allConversationsLoaded,o=this.chRecentListingRef.current;if(!(r||a||t.length<this.limit)&&o.scrollTop+o.clientHeight==o.scrollHeight){this.skip=t.length;var i=n.Conversation.createConversationListQuery();i.limit=this.limit,i.skip=this.skip,this.props.loadMoreConversations(i)}}},{key:"render",value:function(){var e,t=this,n=this.props,r=n.client,a=n.list,o=n.connecting,i=n.connected,s=n.loading,c=n.error,l=n.loadingMoreConversations,u=n.showSearchIcon,d=(n.onSearchIconClick,n.showCloseIcon),p=n.activeConversation,m=n.onSelect,f=r.getCurrentUser();return e=f&&f.profileImageUrl?f.profileImageUrl:U,a=a.map((function(e){return ie(e)})),g.a.createElement("div",{id:"ch_recent_window",className:"ch-recent-window"},g.a.createElement(X,{profileImageUrl:e,title:_,renderRight:function(){return g.a.createElement("div",null,u&&g.a.createElement("i",{title:"Search",className:"material-icons",onClick:t.onSearchIconClick},"search"),d&&g.a.createElement("i",{title:"Close",className:"material-icons",onClick:t.onCloseIconClick},"close"))}}),g.a.createElement("div",{id:"ch_recent_listing",className:"ch-recent-listing",ref:this.chRecentListingRef,onScroll:this.onScroll},(o||s)&&g.a.createElement("div",{className:"center"},g.a.createElement($,null)),c&&g.a.createElement("div",{className:"center error"},c),i&&!a.length&&!s&&g.a.createElement("div",{className:"center no-record-found"},"No record Found"),g.a.createElement("ul",{id:"ch_recent_ul",className:"ch-recent-ul"},a.map((function(e){return g.a.createElement(ye,{key:e.id,activeConversation:p,conversation:e,onSelect:m})}))),l&&g.a.createElement("div",null," Loading... ")))}}]),n}(E.PureComponent);Ne=z(Ne);function Oe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var a=f()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return p()(this,n)}}Ne=Object(y.connect)((function(e){var t=e.conversation,n=e.client,r=e.message;return Se(Se(Se({},t),n),{},{activeConversation:r.conversation})}),{getConversationList:function(e){return function(t){return t({type:"LOADING_CONVERSATION_LIST",payload:{}}),e.list((function(e,n){e&&t({type:"CONVERSATION_LIST_FAIL",payload:e}),t({type:"CONVERSATION_LIST_SUCCESS",payload:n})}))}},loadMoreConversations:function(e){return function(t){return t({type:"LOADING_LOAD_MORE_CONVERSATIONS",payload:{}}),e.list((function(e,n){e&&t({type:"LOAD_MORE_CONVERSATIONS_FAIL",payload:e}),t({type:"LOAD_MORE_CONVERSATIONS_SUCCESS",payload:n})}))}},setActiveConversation:P})(Ne);var be=function(e){u()(n,e);var t=Oe(n);function n(){return a()(this,n),t.apply(this,arguments)}return i()(n,[{key:"downloadFile",value:function(e,t){t=t||w;var n=document.createElement("a");n.href=e,n.target="_blank",n.download=t,document.body.appendChild(n),n.click(),document.body.removeChild(n)}},{key:"render",value:function(){var e=this,t=this.props.file,n=t.fileUrl?t.fileUrl:t.thumbnailUrl;return g.a.createElement("div",{className:"ch-light-box-container"},g.a.createElement("div",null,g.a.createElement("i",{title:"Close",className:"material-icons ch-close-light-box-icon",onClick:this.props.onCloseClick},"close"),g.a.createElement("i",{title:"Download",className:"material-icons ch-close-light-box-icon",onClick:function(){return e.downloadFile(n,t.name)}},"arrow_downward")),"image"==t.type&&g.a.createElement("img",{className:"ch-light-box-file",src:n}),"video"==t.type&&g.a.createElement("video",{controls:!0,id:"videoPlayer",className:"ch-light-box-file",preload:"auto",loop:"loop",autoPlay:"autoplay"},g.a.createElement("source",{src:n})))}}]),n}(E.PureComponent),Me=n(11),De=n.n(Me);function Ie(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var a=f()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return p()(this,n)}}var we={BLOCK:"block",FLEX:"flex",INLINE:"inline",INLINE_BLOCK:"inline-block",CONTENTS:"contents"},Ae={children:De.a.node.isRequired,onOutsideClick:De.a.func.isRequired,disabled:De.a.bool,useCapture:De.a.bool,display:De.a.oneOf(Object.values(we))},Re={disabled:!1,useCapture:!0,display:we.BLOCK},Le=function(e){u()(n,e);var t=Ie(n);function n(){var e;a()(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).onMouseDown=e.onMouseDown.bind(c()(e)),e.onMouseUp=e.onMouseUp.bind(c()(e)),e.setChildNodeRef=e.setChildNodeRef.bind(c()(e)),e}return i()(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.disabled,n=e.useCapture;t||this.addMouseDownEventListener(n)}},{key:"componentDidUpdate",value:function(e){var t=e.disabled,n=this.props,r=n.disabled,a=n.useCapture;t!==r&&(r?this.removeEventListeners():this.addMouseDownEventListener(a))}},{key:"componentWillUnmount",value:function(){this.removeEventListeners()}},{key:"onMouseDown",value:function(e){var t=this.props.useCapture;this.childNode&&(this.childNode&&this.childNode.contains(e.target)||document.addEventListener("mouseup",this.onMouseUp,{capture:t}))}},{key:"onMouseUp",value:function(e){var t=this.props.onOutsideClick;this.childNode&&(this.childNode&&this.childNode.contains(e.target)||t(e))}},{key:"setChildNodeRef",value:function(e){this.childNode=e}},{key:"addMouseDownEventListener",value:function(e){document.addEventListener("mousedown",this.onMouseDown,{capture:e})}},{key:"removeEventListeners",value:function(){document.removeEventListener("mousedown",this.onMouseDown),document.removeEventListener("mouseup",this.onMouseUp)}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.display;return g.a.createElement("div",{className:"outside-event",ref:this.setChildNodeRef,style:n!==we.BLOCK&&Object.values(we).includes(n)?{display:n}:void 0},t)}}]),n}(g.a.Component);function ke(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var a=f()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return p()(this,n)}}Le.propTypes=Ae,Le.defaultProps=Re;var Te=function(e){u()(n,e);var t=ke(n);function n(e){var r;return a()(this,n),r=t.call(this,e),v()(c()(r),"toggleMoreOptions",(function(){r.setState((function(e){return{showMoreOptions:!e.showMoreOptions}}))})),v()(c()(r),"hideMoreOptions",(function(){r.state.showMoreOptions&&r.setState((function(e){return{showMoreOptions:!1}}))})),r.state={showMoreOptions:!1},r}return i()(n,[{key:"downloadFile",value:function(e,t){var n=document.createElement("a");n.href=e,n.target="_blank",n.download=t,document.body.appendChild(n),n.click(),document.body.removeChild(n)}},{key:"render",value:function(){var e,t=this,n=this.props,r=n.client,a=n.message,o=n.renderMoreOptions,i=this.state.showMoreOptions,s=(r.getCurrentUser(),a.isUser?"right":"left"),c="admin"===a.type;a.attachments&&a.attachments.length&&(e=a.attachments.map((function(e){switch(e.type){case"image":return g.a.createElement("img",{key:a.id,className:"ch-image-message",src:e.thumbnailUrl?e.thumbnailUrl:e.fileUr,onClick:t.props.onClickEvent});case"video":return g.a.createElement("div",{key:a.id,className:"ch-video-container"},g.a.createElement("img",{className:"ch-image-message",src:e.thumbnailUrl,onClick:t.props.onClickEvent}),g.a.createElement("i",{className:"material-icons ch-video-play-icon",onClick:t.props.onClickEvent},"play_circle_outline"));case"application":var n=a.attachments[0].extension?a.attachments[0].extension:a.attachments[0].name.split(".").pop();return g.a.createElement("div",{key:a.id,className:"ch-text-message"},g.a.createElement("div",{className:"ch-message"},g.a.createElement("div",{className:"ch-message-body"},g.a.createElement("div",{className:"ch-docs-data"},g.a.createElement("i",{className:"material-icons ch-attachment-icon"},"description"),g.a.createElement("span",{className:"ch-docs-name"},e.name),e.fileUrl&&g.a.createElement("i",{className:"material-icons ch-docs-download-icon",onClick:function(){return t.downloadFile(e.fileUrl,e.name)}},"arrow_downward")),g.a.createElement("div",{className:"ch-docs-details"},g.a.createElement("hr",null),g.a.createElement("span",null,n)))));default:return null}})));var l=a.owner.profileImageUrl;return g.a.createElement(g.a.Fragment,null,a.showDateSeparator&&g.a.createElement("div",{key:"".concat(a.id,"-date"),className:"ch-msg-padding"},g.a.createElement("div",{className:"ch-message-date-separator"},g.a.createElement("div",{className:"message-date-separator_left"}),g.a.createElement("div",{className:"message-date-separator_text"},de(a.createdAt)),g.a.createElement("div",{className:"message-date-separator_right"}))),c?g.a.createElement("div",{className:"ch-admin-msg-container"},g.a.createElement("span",{className:"ch-admin-msg"},a.text)):g.a.createElement("div",{key:a.id,className:"ch-msg-padding ".concat(s)},g.a.createElement("div",{className:"ch-msg-container"},a.showOwnerAvatar&&g.a.createElement("div",{title:a.owner.displayName,className:"ch-message-owner-avatar",style:{backgroundImage:"url(".concat(l,")")}}),g.a.createElement("div",{className:"ch-msg-content ".concat("left"!=s||a.showOwnerAvatar?"":"padding-left")},a.body&&g.a.createElement("div",{className:"ch-text-message ".concat(a.isDeleted?"deleted":"")},a.body),e,g.a.createElement("div",{className:"message-info"},g.a.createElement("span",{id:"ch_msg_time",className:"ch-msg-time"},a.time),a.showReadStatus&&a.readByAll&&g.a.createElement("i",{id:"ch_msg_status",className:"material-icons ch-msg-status ch-msg-read-status"},"done_all"),a.showReadStatus&&!a.pending&&!a.readByAll&&g.a.createElement("i",{id:"ch_msg_status",className:"material-icons ch-msg-status"},"done"),a.showReadStatus&&a.pending&&g.a.createElement("i",{id:"ch_msg_status",className:"material-icons ch-msg-status"},"schedule"))),g.a.createElement("div",{className:"ch-msg-more-icon"},g.a.createElement("i",{className:"material-icons",onClick:function(){return t.toggleMoreOptions()}},"more_vert")),g.a.createElement(Le,{onOutsideClick:function(){return t.hideMoreOptions()}},g.a.createElement("div",{onClick:function(){return t.toggleMoreOptions()}},i&&o&&o())))))}}]),n}(E.Component);Te=z(Te);var Ue=n(14),Fe=n(17),je=n.n(Fe),xe=n(13),Pe=n.n(xe);function Ge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ve(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ge(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ge(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Be(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var a=f()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return p()(this,n)}}var qe=function(e){u()(n,e);var t=Be(n);function n(e){var r;return a()(this,n),r=t.call(this,e),v()(c()(r),"_markAsRead",(function(e){e&&e.config.typing_events&&e.markAsRead()})),v()(c()(r),"_scrollToTarget",(function(e){if(r.chMessageBoxRef){var t=r.chMessageBoxRef.current;"[object Number]"!==Object.prototype.toString.call(e)?t.scrollTop=t.scrollHeight:t.scrollTop=e}})),v()(c()(r),"_init",(function(){var e=r.props,t=e.client,n=e.conversation,a=e.userId,o=e.ownProps;if(n||a){if(!n){r.setState({dummyConversation:null});var i=t.Conversation.createConversationListQuery();a&&(i.membersExactly=a,i.isGroup=!1),i.list((function(e,n){n.length?r.props.setActiveConversation(n[0]):t.User.get(a,(function(e,t){r.setState({dummyConversation:{isGroup:!1,user:t}})}))}))}if(n){r.props.registerConversationEventHandlers(n);var s=n.createMessageListQuery();s.limit=r.limit,r.skip=0,s.skip=r.skip,r.props.getMessageList(s),n.unreadMessageCount>0&&n.markAsRead()}}else if(Object.keys(o).length){if(o.conversation){var c=o.conversation;return"open"!=c.type||c.__isWatching?void r.props.setActiveConversation(c):void c.startWatching((function(e,t){r.props.setActiveConversation(c)}))}if(o.userId)return void r.props.setActiveUserId(o.userId)}})),v()(c()(r),"_onTextMessageChanged",(function(e){e&&r._startTyping(),r._stopTyping()})),v()(c()(r),"_startTyping",(function(){var e=r.props.conversation;e&&"private"==e.type&&e.startTyping()})),v()(c()(r),"_stopTyping",(function(){var e=r.props.conversation;e&&"private"==e.type&&e.stopTyping()})),v()(c()(r),"onCloseIconClick",(function(){r.props.setActiveConversation(null);var e=r.props.onCloseIconClick;e&&"function"==typeof e&&e()})),r.limit=25,r.skip=0,r.showMediaLightBox=!1,r.handleChange=r.handleChange.bind(c()(r)),r.handleKeyPress=r.handleKeyPress.bind(c()(r)),r.sendMessage=r.sendMessage.bind(c()(r)),r.onScroll=r.onScroll.bind(c()(r)),r._markAsRead=je()(r._markAsRead,500),r.sendMedia=r.sendMedia.bind(c()(r)),r._startTyping=je()(r._startTyping,3e3),r._stopTyping=Pe()(r._stopTyping,3e3),r.chMessageBoxRef=g.a.createRef(),r.state={text:"",dummyConversation:null,userId:null},r}return i()(n,[{key:"componentDidMount",value:function(){this.props.connected&&this._init()}},{key:"getSnapshotBeforeUpdate",value:function(e){if(e.list.length<this.props.list.length){if(!this.chMessageBoxRef)return null;var t=this.chMessageBoxRef.current;return{scrollHeight:t.scrollHeight,offsetTop:t.scrollTop,offsetBottom:t.scrollHeight-t.scrollTop}}return null}},{key:"componentDidUpdate",value:function(e,t,n){var r=this,a=this.props,o=a.client,i=a.conversation,s=a.newMessage,c=a.userId;a.loadingMoreMessages;if(!e.connected&&this.props.connected&&this._init(),e.userId!=c&&c&&this._init(),!i&&e.sendingMessage&&!this.props.sendingMessage){this._scrollToTarget();var l=o.Conversation.createConversationListQuery();c&&(l.membersExactly=c,l.isGroup=!1),l.list((function(e,t){t.length?r.props.setActiveConversation(t[0]):o.User.get(c,(function(e,t){r.setState({dummyConversation:{isGroup:!1,user:t}})}))}))}if(i){if((!e.conversation&&i||e.conversation.id!=i.id)&&this._init(),e.loading&&!this.props.loading&&this._scrollToTarget(),!e.newMessage&&s||s&&e.newMessage.id!=s.id)this._scrollToTarget(),o.getCurrentUser().id!=s.ownerId&&this._markAsRead(i);if(e.list.length<this.props.list.length&&n){var u=this.chMessageBoxRef.current.scrollHeight-n.offsetBottom;this._scrollToTarget(u)}}}},{key:"componentWillUnmount",value:function(){var e=this.props.conversation;e&&"open"==e.type&&e.__isWatching&&e.stopWatching()}},{key:"handleChange",value:function(e){this.setState({text:e.target.value})}},{key:"handleKeyPress",value:function(e){if("Enter"===e.key)return e.preventDefault(),void this.sendMessage();this._onTextMessageChanged(e.target.value)}},{key:"sendFile",value:function(e){var t=this,n=this.props,r=n.client,a=n.conversation,o=r.getCurrentUser(),i=e.type.split("/").shift();if(e.type.match("application")){var s={id:Object(Ue.v4)(),pending:!0,ownerId:o.id,attachments:[{type:i,name:e.name}]};this.props.sendFileToConversation(r,a,e,s,i)}else this.getFileThumbnailUrl(e,(function(n){var s={id:Object(Ue.v4)(),pending:!0,ownerId:o.id,attachments:[{type:i,thumbnailUrl:n}]};e.type.match("video")&&(s.attachments[0].fileUrl=URL.createObjectURL(e)),t.props.sendFileToConversation(r,a,e,s,i)}))}},{key:"deleteMessagesForEveryone",value:function(e){if(e){var t=this.props.client;this.props.deleteMessagesForEveryone(t,[e])}}},{key:"deleteMessagesForMe",value:function(e){if(e){var t=this.props.client;this.props.deleteMessagesForMe(t,[e])}}},{key:"sendMessage",value:function(){var e=this.props,t=e.conversation,n=e.client,r=e.userId,a=n.getCurrentUser(),o=this.state.text,i={id:Object(Ue.v4)(),body:o,ownerId:a.id,pending:!0};this.setState({text:""}),t?this.props.sendMessageToConversation(t,i):(i.userId=r,this.props.sendMessageToUserId(n,i))}},{key:"getFileThumbnailUrl",value:function(e,t){var n=new FileReader;e.type.match("image")?(n.onload=function(){document.createElement("img");t(n.result)},n.readAsDataURL(e)):e.type.match("video")&&(n.onload=function(){var r=new Blob([n.result],{type:e.type}),a=URL.createObjectURL(r),o=document.createElement("video"),i=function e(){s()&&(o.removeEventListener("timeupdate",e),o.pause())};o.addEventListener("loadeddata",(function(){s()&&o.removeEventListener("timeupdate",i)}));var s=function(){var e=document.createElement("canvas");e.width=o.videoWidth,e.height=o.videoHeight,e.getContext("2d").drawImage(o,0,0,e.width,e.height);var n=e.toDataURL(),r=n.length>1e5;r&&(document.createElement("img").src=n,t(n),URL.revokeObjectURL(a));return r};o.addEventListener("timeupdate",i),o.preload="metadata",o.src=a,o.muted=!0,o.playsInline=!0,o.play()},n.readAsArrayBuffer(e))}},{key:"onScroll",value:function(){var e=this.props,t=e.list,n=e.conversation,r=e.loadingMoreMessages,a=e.allMessagesLoaded;if(!n)return null;var o=this.chMessageBoxRef.current;if(!(r||a||t.length<this.limit)&&o.scrollTop<o.clientHeight){this.skip=t.length;var i=n.createMessageListQuery();i.limit=this.limit,i.skip=this.skip,this.props.loadMoreMessagesAction(i)}}},{key:"blockUser",value:function(){}},{key:"unblockUser",value:function(){}},{key:"sendMedia",value:function(e){this.sendFile(e.target.files[0]),e.target.value=null}},{key:"viewMediaToggle",value:function(e){var t=e?e.attachments[0]:null;this.setState({openMediaFile:t})}},{key:"render",value:function(){var e=this,t=this.props,n=t.client,r=t.connecting,a=t.connected,o=t.error,i=t.loading,s=t.loadingMoreMessages,c=t.list,l=t.conversation,u=t.showCloseIcon,d=t.showChevron,p=t.disableComposer,m=t.disableComposerMessage,f=t.Message,h=t.showHeader,v=void 0===h||h,E=t.renderHeader,y=t.showComposerActions,_=void 0===y||y,S=t.typing,C=this.state,M=C.text,D=C.dummyConversation;l||(l=D,c=[]),c=se(n,l,c);var I,w,A,L,k=!1;p&&"function"==typeof p&&(k=p(l)),l&&(w=(l=ie(l)).title,A=l.profileImageUrl,!l.isGroup&&l.user&&(L=l.user.isOnline?"Online":"Last Seen "+ne()(l.user.lastSeen).fromNow()),l.isGroup&&(L=l.memberCount+" Members"),I=l.isActive?g.a.createElement("div",{id:"ch_conv_block",onClick:function(){return e.blockUser()}},"Block User"):g.a.createElement("div",{id:"ch_conv_unblock",onClick:function(){return e.unblockUser()}},"Unblock User"));var T=n.getCurrentUser(),U=me(S);return g.a.createElement("div",{id:"ch_conv_window",className:"ch-conv-window"},l&&v&&E&&E(l),l&&v&&!E&&g.a.createElement(X,{profileImageUrl:A,title:w,subtitle:L,showChevron:!(!d||!I),renderDropDownList:function(){if(I)return g.a.createElement("div",{className:"ch-drop-down-list"},I)},renderRight:function(){return g.a.createElement(g.a.Fragment,null,u&&g.a.createElement("i",{title:"Close",className:"material-icons",onClick:e.onCloseIconClick},"close"))}}),g.a.createElement("div",{id:"ch_messages_box",ref:this.chMessageBoxRef,className:"ch-messages-box",onScroll:this.onScroll},g.a.createElement("div",{className:"ch-conversation-padding"}," "),(r||i)&&g.a.createElement("div",{className:"center"},g.a.createElement($,null)),o&&g.a.createElement("div",{className:"center error"},o),g.a.createElement("div",{className:"ch-msg-list"},a&&!l&&g.a.createElement("div",{className:"center no-record-found"},"No conversation seleted"),s&&g.a.createElement($,null),l&&!c.length&&!i&&g.a.createElement("div",{className:"center no-record-found"},"Be first one to start chat!"),c.map((function(t){return g.a.createElement(f,{key:t.id,message:t,onClickEvent:function(){return e.viewMediaToggle(t)},renderMoreOptions:function(){return g.a.createElement("div",{className:"ch-more-options-container"},t.ownerId==T.id&&!t.isDeleted&&g.a.createElement("p",{onClick:function(){return e.deleteMessagesForEveryone(t.id)}},"Delete for everyone"),g.a.createElement("p",{onClick:function(){return e.deleteMessagesForMe(t.id)}},"Delete for me"))}})})),g.a.createElement("div",{className:"ch-typing-strings"},U))),l&&g.a.createElement(g.a.Fragment,null,k?g.a.createElement("div",{className:"ch-composer-disabled-box"},g.a.createElement("div",null,m)):g.a.createElement("div",{id:"ch_send_box",className:"ch-send-box"},_&&g.a.createElement(g.a.Fragment,null,g.a.createElement("div",{className:"ch-media-icon-box"},g.a.createElement("i",{title:O,className:"material-icons ch-attachment-icon"},"insert_photo"),g.a.createElement("input",{id:"ch_gallary_input",title:O,className:"ch-gallary-input",type:"file",accept:"image/*, video/*",onChange:this.sendMedia})),g.a.createElement("div",{className:"ch-media-icon-box"},g.a.createElement("i",{title:b,className:"material-icons ch-attachment-icon"},"description"),g.a.createElement("input",{id:"ch_document_input",title:b,className:"ch-document-input",type:"file",accept:"application/*,.doc,.docx,.xls,.ppt",onChange:this.sendMedia}))),g.a.createElement("textarea",{id:"ch_input_box",className:"ch-input-box",type:"text",placeholder:N,value:M,onKeyPress:function(t){e.handleKeyPress(t)},onChange:function(t){e.handleChange(t)}}),g.a.createElement("button",{id:"ch_send_button",className:"ch-send-button",title:R,onClick:this.sendMessage},g.a.createElement("i",{className:"ch-send-icon material-icons"},"send")))),this.state.openMediaFile&&g.a.createElement(be,{file:this.state.openMediaFile,onCloseClick:function(){return e.viewMediaToggle(null)}}))}}]),n}(E.PureComponent);(qe=z(qe)).propTypes={Message:De.a.elementType},qe.defaultProps={Message:Te,showHeader:!0,showComposerActions:!0};function He(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var a=f()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return p()(this,n)}}qe=Object(y.connect)((function(e,t){var n=e.message,r=e.client;return Ve(Ve(Ve({},n),r),{},{ownProps:t})}),{getMessageList:function(e){return function(t){return t({type:"LOADING_MESSAGE_LIST",payload:{}}),e.list((function(e,n){t(e?{type:"MESSAGE_LIST_FAIL",payload:e}:{type:"MESSAGE_LIST_SUCCESS",payload:n.reverse()})}))}},sendMessageToConversation:function(e,t){return function(n){n({type:"SENDING_MESSAGE",payload:t});var r={id:t.id,body:t.body,attachments:t.attachments?t.attachments:[]};return e.sendMessage(r,(function(e,t){if(e)return r.error=e,void n({type:"SEND_MESSAGE_FAIL",payload:r});n({type:"SEND_MESSAGE_SUCCESS",payload:t})}))}},sendMessageToUserId:function(e,t){return function(n){return n({type:"SENDING_MESSAGE",payload:t}),e.Message.sendMessage(t,(function(e,t){e&&n({type:"SEND_MESSAGE_FAIL",payload:e}),n({type:"SEND_MESSAGE_SUCCESS",payload:t})}))}},sendFileToConversation:function(e,t,n,r,a){return function(o){o({type:"SENDING_FILE",payload:r});var i="application"!==a;e.File.upload(n,a,i,(function(e,n){if(e)return r.error=e,void o({type:"SEND_FILE_FAIL",payload:r});var a={};return a.id=r.id,a.attachments=[n],t.sendMessage(a,(function(e,t){if(e)return a.error=e,void o({type:"SEND_FILE_FAIL",payload:a});o({type:"SEND_FILE_SUCCESS",payload:t})}))}))}},loadMoreMessagesAction:function(e){return function(t){return t({type:"LOADING_LOAD_MORE_MESSAGES",payload:{}}),e.list((function(e,n){t(e?{type:"LOAD_MORE_MESSAGES_FAIL",payload:e}:{type:"LOAD_MORE_MESSAGES_SUCCESS",payload:n.reverse()})}))}},setActiveConversation:P,setActiveUserId:G,registerConversationEventHandlers:function(e){return function(t){e.__isWatching&&e.on("watcher.message.created",(function(e){t({type:"NEW_MESSAGE_RECEIVED_EVENT",payload:e})}))}},deleteMessagesForEveryone:function(e,t){return function(n){return n({type:"DELETING_MESSAGES_FOR_EVERYONE",payload:t}),e.Message.deleteMessagesForEveryone(t,(function(e,r){n(e?{type:"DELETE_MESSAGES_FOR_EVERYONE_FAIL",payload:e}:{type:"DELETE_MESSAGES_FOR_EVERYONE_SUCCESS",payload:t})}))}},deleteMessagesForMe:function(e,t){return function(n){return n({type:"DELETING_MESSAGES_FOR_ME",payload:t}),e.Message.deleteMessagesForMe(t,(function(e,r){n(e?{type:"DELETE_MESSAGES_FOR_ME_FAIL",payload:e}:{type:"DELETE_MESSAGES_FOR_ME_SUCCESS",payload:t})}))}}})(qe);var ze=function(e){u()(n,e);var t=He(n);function n(e){return a()(this,n),t.call(this,e)}return i()(n,[{key:"showImage",value:function(e){var t=document.createElement("a");t.href=e,t.target="_blank",document.body.appendChild(t),t.click(),document.body.removeChild(t)}},{key:"downloadFile",value:function(e,t){var n=document.createElement("a");n.href=e,n.target="_blank",n.download=t,document.body.appendChild(n),n.click(),document.body.removeChild(n)}},{key:"render",value:function(){var e,t=this,n=this.props,r=n.client,a=n.message;r.getCurrentUser();a.attachments&&a.attachments.length&&(e=a.attachments.map((function(e){switch(e.type){case"image":return g.a.createElement("img",{className:"ch-image-message",src:e.thumbnailUrl?e.thumbnailUrl:e.fileUr,onClick:function(){return t.showImage(e.fileUrl)}});case"video":return g.a.createElement("div",{className:"ch-video-container"},g.a.createElement("img",{className:"ch-image-message",src:e.thumbnailUrl,onClick:function(){return t.showImage(e.fileUrl)}}),g.a.createElement("i",{className:"material-icons ch-video-play-icon"},"play_circle_outline"));case"application":return g.a.createElement("div",{className:"ch-text-message"},g.a.createElement("div",{className:"ch-message-body"},g.a.createElement("div",{className:"ch-docs-data"},g.a.createElement("i",{className:"material-icons ch-attachment-icon"},"description"),g.a.createElement("span",{className:"ch-docs-name"},e.name),g.a.createElement("i",{className:"material-icons ch-docs-download-icon",onClick:function(){return t.downloadFile(e.fileUrl,e.name)}},"arrow_downward")),g.a.createElement("div",{className:"ch-docs-details"},g.a.createElement("hr",null),g.a.createElement("span",null,e.extension))));default:return null}})));var o=a.owner.profileImageUrl;return g.a.createElement(g.a.Fragment,null,a.showDateSeparator&&g.a.createElement("div",{key:"".concat(a.id,"-date"),className:"ch-msg-padding"},g.a.createElement("div",{className:"ch-message-date-separator"},g.a.createElement("div",{className:"message-date-separator_left"}),g.a.createElement("div",{className:"message-date-separator_text"},de(a.createdAt)),g.a.createElement("div",{className:"message-date-separator_right"}))),g.a.createElement("div",{key:a.id,className:"ch-msg-padding ".concat("left")},g.a.createElement("div",{className:"ch__message-livestream__container"},g.a.createElement("div",{title:a.owner.displayName,className:"ch-message-owner-avatar",style:{backgroundImage:"url(".concat(o,")")}}),g.a.createElement("div",{className:"ch__message-livestream__owner-name"},a.owner.displayName),g.a.createElement("div",{className:"ch-msg-content"},a.body&&g.a.createElement("div",{className:"ch__message-livestream__text"},a.body),e))))}}]),n}(E.Component);function Ye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function We(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ye(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ye(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ke(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var a=f()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return p()(this,n)}}ze=z(ze);var Qe=function(e){u()(n,e);var t=Ke(n);function n(e){var r;return a()(this,n),r=t.call(this,e),v()(c()(r),"_init",(function(){var e=r.props.client.User.createUserListQuery();e.limit=r.friendsLimit,e.skip=0,e.sort="isOnline DESC, displayName ASC ",r.props.getFriendsList(e)})),v()(c()(r),"_searchOnServer",(function(e){var t=r.props.client,n=t.User.createUserListQuery();n.limit=r.searchLimit,n.skip=0,n.search=e,n.sort="isOnline DESC, displayName ASC",r.props.searchFriendsAction(n);var a=t.User.createUserListQuery();a.limit=r.searchLimit,a.skip=0,a.search=e,a.sort="isOnline DESC, displayName ASC",r.props.getMoreUsersList(a)})),v()(c()(r),"clearSearch",(function(){r.setState({searchText:""})})),v()(c()(r),"onContactClick",(function(e){var t=r.props.onContactClick;r.props.setActiveUserId(e),t&&"function"==typeof t&&t(e)})),r.searchLimit=10,r.friendsLimit=50,r.state={searchText:""},r.handleChange=r.handleChange.bind(c()(r)),r._searchOnServer=Pe()(r._searchOnServer,800),r}return i()(n,[{key:"componentDidMount",value:function(){this.props.connected&&this._init()}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=(t.client,t.connected);n&&!e.connected&&n&&this._init()}},{key:"handleChange",value:function(e){var t=e.target.value;this.setState({searchText:t}),t&&this._searchOnServer(t)}},{key:"render",value:function(){var e=this,t=this.props,n=t.connecting,r=t.connected,a=t.loadingFriendsList,o=t.loadingSearchFriends,i=t.friendslist,s=t.moreUsersList,c=t.searchFriends,l=t.showArrowBack,u=t.onBack,d=this.state.searchText,p=i;d?p=c:s=[];var m=!!s.length;return g.a.createElement("div",{id:"ch_search_window",className:"ch-search-window"},g.a.createElement(X,{showArrowBack:l,onBack:u,title:M}),g.a.createElement("div",{id:"ch_search_box",className:"ch-search-box"},g.a.createElement("input",{placeholder:"Search",id:"ch_search_input_box",className:"ch-search-input-box",value:d,onChange:this.handleChange}),d&&g.a.createElement("i",{id:"ch_clear_search_icon",className:"material-icons ch-clear-search-icon",onClick:this.clearSearch},"close")),g.a.createElement("div",{id:"ch_friends_box",className:"ch-friends-box"},(n||a)&&g.a.createElement("div",{className:"center"},g.a.createElement($,null)),o&&g.a.createElement("div",null,g.a.createElement($,null)),r&&d&&!p.length&&!m&&!a&&!o&&g.a.createElement("div",{className:"center no-record-found"},"No Record Found"),g.a.createElement("div",{id:"ch_suggested_box"},!d&&!a&&g.a.createElement("div",{id:"ch_suggested",className:"ch-suggested"},D),p.map((function(t){var n=t.profileImageUrl?t.profileImageUrl:U;return g.a.createElement("li",{key:t.id,id:t.id,className:"ch-friends-list",onClick:function(){return e.onContactClick(t.id)}},g.a.createElement("div",{className:"ch-contact-img",style:{backgroundImage:"url(".concat(n,")")}},t.isOnline&&g.a.createElement("span",{className:"ch-online-icon ch-show-element"})),g.a.createElement("div",{id:"ch_friend_name",className:"ch-friend-name"},t.displayName))}))),m&&g.a.createElement("div",{id:"ch_users_box"},g.a.createElement("div",{id:"ch_more_users",className:"ch-more-users"},I),s.map((function(t){var n=t.profileImageUrl?t.profileImageUrl:U;return g.a.createElement("li",{key:t.id,id:t.id,className:"ch-friends-list",onClick:function(){return e.onContactClick(t.id)}},g.a.createElement("div",{className:"ch-contact-img",style:{backgroundImage:"url(".concat(n,")")}},t.isOnline&&g.a.createElement("span",{className:"ch-online-icon ch-show-element"})),g.a.createElement("div",{id:"ch_friend_name",className:"ch-friend-name"},t.displayName))})))))}}]),n}(E.PureComponent);Qe=z(Qe);Qe=Object(y.connect)((function(e){var t=e.user,n=e.client;return We(We({},t),n)}),{getFriendsList:function(e){return function(t){return t({type:"LOADING_FRIENDS_LIST",payload:{}}),e.friendsList((function(e,n){e&&t({type:"FRIENDS_LIST_FAIL",payload:e}),t({type:"FRIENDS_LIST_SUCCESS",payload:n})}))}},loadMoreFriends:function(e){return function(t){return t({type:"LOADING_LOAD_MORE_FRIENDS",payload:{}}),e.friendsList((function(e,n){e&&t({type:"LOAD_MORE_FRIENDS_FAIL",payload:e}),t({type:"LOAD_MORE_FRIENDS_SUCCESS",payload:n})}))}},getMoreUsersList:function(e){return function(t){return t({type:"LOADING_MORE_USERS_LIST",payload:{}}),e.usersList((function(e,n){e&&t({type:"MORE_USERS_LIST_FAIL",payload:e}),t({type:"MORE_USERS_LIST_SUCCESS",payload:n})}))}},searchFriendsAction:function(e){return function(t){return t({type:"LOADING_SEARCH_FRIENDS",payload:{}}),e.friendsList((function(e,n){e&&t({type:"SEARCH_FRIENDS_FAIL",payload:e}),t({type:"SEARCH_FRIENDS_SUCCESS",payload:n})}))}},setActiveUserId:G})(Qe);var Je=n(12),Xe=n(19),Ze=n.n(Xe);n(21),n(22);function $e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function et(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$e(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var tt,nt,rt={connecting:!1,connected:!1,error:null},at=n(8),ot=n.n(at),it=ae({list:[],loading:!1,loadingMoreConversations:!1,allConversationsLoaded:!1,error:null},(tt={},v()(tt,"LOADING_CONVERSATION_LIST",(function(e,t){e.loading=!0})),v()(tt,"CONVERSATION_LIST_FAIL",(function(e,t){e.loading=!1,e.error=t.payload})),v()(tt,"CONVERSATION_LIST_SUCCESS",(function(e,t){e.loading=!1,e.list=t.payload})),v()(tt,"LOADING_LOAD_MORE_CONVERSATIONS",(function(e,t){e.loadingMoreConversations=!0})),v()(tt,"LOAD_MORE_CONVERSATIONS_FAIL",(function(e,t){e.loadingMoreConversations=!1,e.error=t.payload})),v()(tt,"LOAD_MORE_CONVERSATIONS_SUCCESS",(function(e,t){e.loadingMoreConversations=!1,t.payload.length?(e.list=[].concat(ot()(e.list),ot()(t.payload)),e.list=oe(e.list)):e.allConversationsLoaded=!0})),v()(tt,"USER_STATUS_UPDATED",(function(e,t){var n=t.payload.user,r=e.list.map((function(e,t){return e.isGroup||e.user.id!=n.id||(e.user.isOnline=n.isOnline,e.user.lastSeen=n.lastSeen),e}));e.list=r})),v()(tt,"NEW_MESSAGE_RECEIVED_EVENT",(function(e,t){var n,r,a=t.payload.message,o=e.list.map((function(e,o){return e.id==a.conversationId?(e.lastMessage=a,e.updatedAt=t.payload.timestamp,n=o,r=e,e):e}));n>0&&(o.splice(n,1),o.unshift(r)),e.list=o})),v()(tt,"USER_JOINED_EVENT",(function(e,t){var n=t.payload.conversation;e.list=[n].concat(ot()(e.list)),e.list=oe(e.list)})),v()(tt,"MEMBERS_ADDED_EVENT",(function(e,t){var n,r,a=t.payload,o=a.conversation,i=a.members,s=a.timestamp,c=e.list.map((function(e,t){return e.id==o.id?(e.memberCount=o.memberCount,e.updatedAt=s,e.members=e.members.concat(i),n=t,r=e,e):e}));n>0&&(c.splice(n,1),c.unshift(r)),e.list=c})),v()(tt,"MEMBERS_REMOVED_EVENT",(function(e,t){var n,r,a=t.payload,o=a.conversation,i=a.members,s=a.timestamp,c=e.list.map((function(e,t){return e.id==o.id?(e.memberCount=o.memberCount,e.updatedAt=s,i.forEach((function(t){var n=e.members.findIndex((function(e){return e.userId==t.id}));n>=0&&e.members.splice(n,1)})),n=t,r=e,e):e}));n>0&&(c.splice(n,1),c.unshift(r)),e.list=c})),v()(tt,"CONVERSATION_UPDATED_EVENT",(function(e,t){var n,r,a=t.payload.conversation,o=e.list.map((function(e,o){return e.id==a.id?(e.title=a.title,e.profileImageUrl=a.profileImageUrl,e.updatedAt=t.payload.timestamp,n=o,r=e,e):e}));n>0&&(o.splice(n,1),o.unshift(r)),e.list=o})),v()(tt,"USER_UPDATED_EVENT",(function(e,t){var n=t.payload.user,r=e.list.map((function(e,t){return e.isGroup||e.user.id!=n.id||(e.user.isOnline=n.isOnline,e.user.lastSeen=n.lastSeen,e.user.displayName=n.displayName,e.user.profileImageUrl=n.profileImageUrl),e}));e.list=r})),v()(tt,"MARK_AS_READ_EVENT",(function(e,t){var n=t.payload,r=n.conversation,a=n.user,o=n.timestamp,i=e.list.map((function(e,t){return e.id==r.id?(e.lastReadAt[a.id]&&(e.lastReadAt[a.id]=o),e):e}));e.list=i})),v()(tt,"DELETE_MESSAGE_FOR_EVERYONE_EVENT",(function(e,t){var n=t.payload.messages,r=e.list.map((function(e){return e.id==t.payload.conversation.id&&e.lastMessage&&n.map((function(e){return e.id})).includes(e.lastMessage.id)?(e.lastMessage.isDeleted=!0,e.lastMessage.body="",e.lastMessage.attachments=[],e.updatedAt=t.payload.timestamp,e):e}));e.list=r})),v()(tt,"DELETE_MESSAGE_EVENT",(function(e,t){var n=t.payload.messages;e.list.map((function(r,a){r.id==t.payload.conversation.id&&r.lastMessage&&(n.map((function(e){return e.id})).includes(r.lastMessage.id)&&(e.list[a]=t.payload.conversation))}))})),tt)),st=n(9);function ct(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function lt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ct(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ct(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ut,dt=ae({list:[],loading:!1,error:null,loadingMoreMessages:!1,allMessagesLoaded:!1,sendingMessage:!1,typing:[],conversation:null,userId:null,newMessage:null,sendingFile:!1},(nt={},v()(nt,"LOADING_MESSAGE_LIST",(function(e,t){e.loading=!0,e.list=[],e.allMessagesLoaded=!1})),v()(nt,"MESSAGE_LIST_SUCCESS",(function(e,t){e.loading=!1,e.list=t.payload})),v()(nt,"MESSAGE_LIST_FAIL",(function(e,t){e.loading=!1,e.error=t.payload})),v()(nt,"SENDING_MESSAGE",(function(e,t){e.sendingMessage=!0,t.payload.status="pending",e.list=[].concat(ot()(e.list),[t.payload]),e.list=oe(e.list)})),v()(nt,"SEND_MESSAGE_SUCCESS",(function(e,t){e.sendingMessage=!1,e.list=[].concat(ot()(e.list),[t.payload]),e.list=oe(e.list)})),v()(nt,"SEND_MESSAGE_FAIL",(function(e,t){t.payload.status="failed"})),v()(nt,"SENDING_FILE",(function(e,t){e.sendingFile=!0,e.list=[].concat(ot()(e.list),[t.payload]),e.list=oe(e.list)})),v()(nt,"SEND_FILE_FAIL",(function(e,t){e.sendingFile=!1})),v()(nt,"SEND_FILE_SUCCESS",(function(e,t){e.sendingFile=!1,e.list=[].concat(ot()(e.list),[t.payload]),e.list=oe(e.list)})),v()(nt,"LOADING_LOAD_MORE_MESSAGES",(function(e,t){e.loadingMoreMessages=!0})),v()(nt,"LOAD_MORE_MESSAGES_SUCCESS",(function(e,t){e.loadingMoreMessages=!1,t.payload.length?(e.list=[].concat(ot()(t.payload),ot()(e.list)),e.list=oe(e.list)):e.allMessagesLoaded=!0})),v()(nt,"LOAD_MORE_MESSAGES_FAIL",(function(e,t){e.loadingMoreMessages=!1,e.error=t.payload})),v()(nt,"SET_ACTIVE_CONVERSATION",(function(e,t){e.conversation=t.payload,e.userId=null})),v()(nt,"SET_ACTIVE_USERID",(function(e,t){e.userId=t.payload,e.conversation=null})),v()(nt,"CONVERSATION_UPDATED_EVENT",(function(e,t){var n=t.payload.conversation,r=n.id,a=n.title,o=n.profileImageUrl;if(e.conversation&&e.conversation.id==r){var i=lt(lt({},e.conversation.toJSON()),{},{title:a,profileImageUrl:o,updatedAt:t.payload.timestamp}),s=st.Channelize.core.Client.getInstance();e.conversation=new st.Channelize.core.Conversation.Model(s,i)}})),v()(nt,"MEMBERS_ADDED_EVENT",(function(e,t){var n=t.payload,r=n.conversation,a=n.members,o=n.timestamp;if(e.conversation&&e.conversation.id==r.id){var i=e.conversation.toJSON();i.members=i.members.concat(a),i.memberCount=r.memberCount,i.updatedAt=o;var s=st.Channelize.core.Client.getInstance();e.conversation=new st.Channelize.core.Conversation.Model(s,i)}})),v()(nt,"MEMBERS_REMOVED_EVENT",(function(e,t){var n=t.payload,r=n.conversation,a=n.members,o=n.timestamp;if(e.conversation&&e.conversation.id==r.id){var i=e.conversation.toJSON();i.memberCount=r.memberCount,i.updatedAt=o,a.forEach((function(e){var t=i.members.findIndex((function(t){return t.userId==e.id}));t>=0&&i.members.splice(t,1)}));var s=st.Channelize.core.Client.getInstance();e.conversation=new st.Channelize.core.Conversation.Model(s,i)}})),v()(nt,"NEW_MESSAGE_RECEIVED_EVENT",(function(e,t){var n=t.payload.message;e.conversation&&e.conversation.id==n.conversationId&&(e.list=[].concat(ot()(e.list),[n]),e.list=oe(e.list),e.newMessage=n)})),v()(nt,"USER_STATUS_UPDATED",(function(e,t){var n=t.payload.user;if(e.conversation&&!e.conversation.isGroup&&e.conversation.user.id==n.id){var r=e.conversation.toJSON();r.user.isOnline=n.isOnline,r.user.lastSeen=n.lastSeen;var a=st.Channelize.core.Client.getInstance();e.conversation=new st.Channelize.core.Conversation.Model(a,r)}})),v()(nt,"USER_UPDATED_EVENT",(function(e,t){var n=t.payload.user;if(e.conversation&&!e.conversation.isGroup&&e.conversation.user.id==n.id){var r=e.conversation.toJSON();r.user.isOnline=n.isOnline,r.user.lastSeen=n.lastSeen,r.user.displayName=n.displayName,r.user.profileImageUrl=n.profileImageUrl;var a=st.Channelize.core.Client.getInstance();e.conversation=new st.Channelize.core.Conversation.Model(a,r)}})),v()(nt,"MARK_AS_READ_EVENT",(function(e,t){var n=t.payload,r=n.conversation,a=n.user,o=n.timestamp;if(e.conversation&&e.conversation.id==r.id){var i=e.conversation.toJSON();i.lastReadAt[a.id]&&(i.lastReadAt[a.id]=o);var s=st.Channelize.core.Client.getInstance();e.conversation=new st.Channelize.core.Conversation.Model(s,i)}})),v()(nt,"TYPING_EVENT",(function(e,t){var n=t.payload,r=n.conversation,a=n.isTyping,o=n.user,i=e.conversation;if(i&&i.id==r.id){var s=e.typing.findIndex((function(e){return e.id==o.id}));a&&s<0?e.typing.push(o):!a&&s>=0&&e.typing.splice(s,1)}})),v()(nt,"DELETE_MESSAGE_FOR_EVERYONE_EVENT",(function(e,t){var n=t.payload.conversation,r=t.payload.messages;if(e.conversation&&e.conversation.id==n.id){var a=r.map((function(e){return e.id})),o=e.list.map((function(e){return a.includes(e.id)?(e.isDeleted=!0,e.body="",e.attachments=[],e):e}));e.list=o}})),v()(nt,"DELETE_MESSAGE_EVENT",(function(e,t){var n=t.payload.conversation,r=t.payload.messages;if(e.conversation&&e.conversation.id==n.id){var a=r.map((function(e){return e.id}));e.list=ot()(e.list.filter((function(e){return!a.includes(e.id)})))}})),v()(nt,"DELETE_MESSAGES_FOR_EVERYONE_SUCCESS",(function(e,t){var n=t.payload,r=e.list.map((function(e){return n.includes(e.id)?(e.isDeleted=!0,e.body="",e.attachments=[],e):e}));e.list=r})),v()(nt,"DELETE_MESSAGES_FOR_ME_SUCCESS",(function(e,t){var n=t.payload;e.list=ot()(e.list.filter((function(e){return!n.includes(e.id)})))})),nt)),pt=ae({friendslist:[],loadingFriendsList:!1,error:null,loadingMoreFriends:!1,allFriendsLoaded:!1,moreUsersList:[],loadingMoreUsersList:!1,searchFriends:[],loadingSearchFriends:!1},(ut={},v()(ut,"LOADING_FRIENDS_LIST",(function(e,t){e.loadingFriendsList=!0,e.allFriendsLoaded=!1,e.friendslist=[]})),v()(ut,"FRIENDS_LIST_SUCCESS",(function(e,t){e.loadingFriendsList=!1,e.friendslist=t.payload})),v()(ut,"FRIENDS_LIST_FAIL",(function(e,t){e.loadingFriendsList=!1,e.error=t.payload})),v()(ut,"LOADING_LOAD_MORE_FRIENDS",(function(e,t){e.loadingMoreFriends=!0})),v()(ut,"LOAD_MORE_FRIENDS_SUCCESS",(function(e,t){e.loadingMoreFriends=!1,t.payload.length?(e.friendslist=[].concat(ot()(e.friendslist),ot()(t.payload)),e.friendslist=oe(e.friendslist)):e.allFriendsLoaded=!0})),v()(ut,"LOAD_MORE_FRIENDS_FAIL",(function(e,t){e.loadingMoreFriends=!1,e.error=t.payload})),v()(ut,"LOADING_MORE_USERS_LIST",(function(e,t){e.loadingMoreUsersList=!0,e.moreUsersList=[]})),v()(ut,"MORE_USERS_LIST_SUCCESS",(function(e,t){e.loadingMoreUsersList=!1,e.moreUsersList=t.payload})),v()(ut,"MORE_USERS_LIST_FAIL",(function(e,t){e.loadingMoreUsersList=!1,e.error=t.payload})),v()(ut,"LOADING_SEARCH_FRIENDS",(function(e,t){e.loadingSearchFriends=!0,e.searchFriends=[]})),v()(ut,"SEARCH_FRIENDS_SUCCESS",(function(e,t){e.loadingSearchFriends=!1,e.searchFriends=t.payload})),v()(ut,"SEARCH_FRIENDS_FAIL",(function(e,t){e.loadingSearchFriends=!1,e.error=t.payload})),ut)),mt=Object(Je.combineReducers)({client:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CONNECTING":return et(et({},e),{},{connecting:!0});case"CONNECT_SUCCESS":return et(et({},e),{},{connected:!0,connecting:!1});case"CONNECT_FAIL":return et(et({},e),{},{connected:!1,error:t.payload,connecting:!1});case"DISCONNECT_SUCCESS":return et(et({},e),{},{connected:!1});case"DISCONNECT_FAIL":return et(et({},e),{},{connected:!0,error:t.payload});default:return e}},conversation:it,message:dt,user:pt}),ft=[Ze.a];var ht=Je.compose.apply(void 0,[Je.applyMiddleware.apply(void 0,ft)].concat([])),vt=Object(Je.createStore)(mt,{},ht);n.d(t,"App",(function(){return Q})),n.d(t,"Header",(function(){return X})),n.d(t,"Launcher",(function(){return Z})),n.d(t,"Loader",(function(){return $})),n.d(t,"ConversationList",(function(){return Ne})),n.d(t,"ConversationItem",(function(){return ye})),n.d(t,"ConversationWindow",(function(){return qe})),n.d(t,"MessageSimple",(function(){return Te})),n.d(t,"MessageLivestream",(function(){return ze})),n.d(t,"SearchWindow",(function(){return Qe})),n.d(t,"OutsideClickHandler",(function(){return Le})),n.d(t,"createReducer",(function(){return ae})),n.d(t,"uniqueList",(function(){return oe})),n.d(t,"modifyConversation",(function(){return ie})),n.d(t,"modifyMessageList",(function(){return se})),n.d(t,"getLastMessageString",(function(){return ce})),n.d(t,"lastMessageTimeParser",(function(){return le})),n.d(t,"AMorPMTimeParser",(function(){return ue})),n.d(t,"dateSeparatorParser",(function(){return de})),n.d(t,"isSameDay",(function(){return pe})),n.d(t,"typingString",(function(){return me})),n.d(t,"isSameUser",(function(){return fe})),n.d(t,"capitalize",(function(){return he})),n.d(t,"ChannelizeContext",(function(){return q})),n.d(t,"ChannelizeProvider",(function(){return H})),n.d(t,"withChannelizeContext",(function(){return z})),n.d(t,"store",(function(){return vt}))}]);
//# sourceMappingURL=index.js.map